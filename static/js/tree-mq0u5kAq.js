var yt=Object.defineProperty,xt=Object.defineProperties;var Ct=Object.getOwnPropertyDescriptors;var Ye=Object.getOwnPropertySymbols;var kt=Object.prototype.hasOwnProperty,Mt=Object.prototype.propertyIsEnumerable;var Ke=(e,n,a)=>n in e?yt(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,ie=(e,n)=>{for(var a in n||(n={}))kt.call(n,a)&&Ke(e,a,n[a]);if(Ye)for(var a of Ye(n))Mt.call(n,a)&&Ke(e,a,n[a]);return e},Ie=(e,n)=>xt(e,Ct(n));import{d as se,aN as ve,aO as ut,g as A,q as I,o as M,b as U,aP as it,U as rt,h as q,ak as Y,av as St,aw as wt,u as o,aQ as ct,aR as z,z as We,a2 as ce,P as _e,Q as N,c as K,W as de,e as X,az as Le,X as Te,am as fe,N as Ae,r as ae,T as Ze,Y as It,aS as Xe,aT as J,S as be,x as Ge,y as $e,ao as Wt,j as _t,w as Qe,R as Ht,f as Je,aU as Rt,aE as Ot,_ as Pt}from"./index-Dh3K64Mq.js";import{useDict as Bt}from"./hook-BAcJWygQ.js";import{R as Lt}from"./index-CcWpMIq-.js";import{u as Pe}from"./hooks-BzRH1kkd.js";import{A as Tt,E as $t,D as At}from"./add-circle-line-COzSlYXa.js";import"./dict.vue_vue_type_script_setup_true_lang-CBGux6tW.js";import"./rule-uSEkFWb4.js";import"./index-Bpb1WbEE.js";import"./system-jZ8CCYOj.js";let re=null;function Dt(){return re!==null}function zt(e){re&&dt(),re=e}function qe(e){e===re&&(re=null)}function dt(){re&&(re.closeMenu(),re=null)}const ne={defaultDirection:"br",defaultMinWidth:100,defaultMaxWidth:600,defaultZindex:100,defaultZoom:1,defaultAdjustPadding:{x:0,y:10}};function xe(e,n){let a=e.offsetTop;return e.offsetParent!=null&&e.offsetParent!=n&&(a-=e.offsetParent.scrollTop,a+=xe(e.offsetParent,n)),a}function Ce(e,n){let a=e.offsetLeft;return e.offsetParent!=null&&e.offsetParent!=n&&(a-=e.offsetParent.scrollLeft,a+=Ce(e.offsetParent,n)),a}function jt(e,n,a,s){return{x:Ce(e,s)+n,y:xe(e,s)+a}}const Be="mx-menu-default-container",Ft="mx-menu-container-";let Et=0;function ft(e){const{getContainer:n,zIndex:a}=e;if(n){const f=typeof n=="function"?n():n;if(f){let t=f.getAttribute("id");return t||(t=Ft+Et++,f.setAttribute("id",t)),{eleId:t,container:f,isNew:!1}}}let s=document.getElementById(Be);return s||(s=document.createElement("div"),s.setAttribute("id",Be),s.setAttribute("class","mx-menu-ghost-host fullscreen"),document.body.appendChild(s)),s.style.zIndex=(a==null?void 0:a.toString())||ne.defaultZindex.toString(),{eleId:Be,container:s,isNew:!0}}function Nt(e){let n=0;for(let a=0;a<e.length;a++){const s=e.charCodeAt(a);n=(n<<5)-n+s,n|=0}return n}function et(e){return typeof e=="number"?`${e}px`:e}const le=se({props:{vnode:{type:null},data:{type:null,default:null}},setup(e){const{vnode:n,data:a}=ve(e);return()=>typeof n.value=="function"?n.value(a.value):n.value}});function Vt(e,n){const a=ie({},e);return delete a[n],a}var Ut=Object.defineProperty,Yt=(e,n,a)=>n in e?Ut(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,tt=(e,n,a)=>Yt(e,typeof n!="symbol"?n+"":n,a);class lt{constructor(n,a){tt(this,"x",0),tt(this,"y",0),this.x=n||0,this.y=a||0}set(n,a){this.x=n,this.y=a}substract(n){this.x-=n.x,this.y-=n.y}}function nt(e){const{onDown:n,onMove:a,onUp:s}=e,f=new lt,t=new lt;let S;function c(b){b.stopPropagation(),t.set(b.x,b.y),t.substract(f),a(f,t,b,S)}function x(b){s(b,S),f.set(0,0),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",x)}return(b,C)=>n(b,C)?(S=C,f.set(b.x,b.y),document.addEventListener("mousemove",c),document.addEventListener("mouseup",x),b.stopPropagation(),!0):!1}function Kt(e,n){let a=0;return{start(){a>0&&clearInterval(a),a=setInterval(()=>{a=0,n()},e)},stop(){a>0&&(clearInterval(a),a=0)}}}const ye=[],ot=Kt(100,()=>{for(const e of ye)e()});function Zt(e,n,a,s){let f=0,t=0;function S(){e.value&&(n&&f!==e.value.offsetWidth&&n(e.value.offsetWidth),a&&t!==e.value.offsetHeight&&a(e.value.offsetHeight),f=e.value.offsetWidth,t=e.value.offsetHeight)}return{startResizeChecker(){ot.start(),ye.push(S)},stopResizeChecker(){const c=ye.indexOf(S);c>=0&&ye.splice(c,1),ye.length===0&&ot.stop()}}}const at=140,Xt=70,Gt=se({__name:"ScrollRect",props:{scroll:{type:String,default:"both"},scrollBarAlwaysShow:{type:Boolean,default:!1},scrollBarBackgroundClickable:{type:Boolean,default:!1},height:{type:Number,default:void 0},width:{type:Number,default:void 0},maxHeight:{type:Number,default:void 0},maxWidth:{type:Number,default:void 0},containerClass:{type:String,default:""},containerStyle:{type:null}},emits:["scroll","resized"],setup(e,{expose:n,emit:a}){const s=e,f=a,t=I(),S=I(),c=I(),x=I(),b=I(),C=I(),O=I(!1),V=$e(()=>s.scroll==="horizontal"||s.scroll==="both"),_=$e(()=>s.scroll==="vertical"||s.scroll==="both"),y=Ge({show:!1,size:0,sizeRaw:0,pos:0}),h=Ge({show:!1,size:0,sizeRaw:0,pos:0});let d=0,p=0,P=0,R=0,B=null;const W={attributes:!0,childList:!0};function u(){if(t.value){if(y.show){const l=t.value.offsetWidth/t.value.scrollWidth;y.sizeRaw=l*t.value.offsetWidth,y.size=l*100,y.pos=t.value.scrollLeft/(t.value.scrollWidth-t.value.offsetWidth)*(100-y.size),l>=1&&(y.show=!1)}if(h.show){const l=t.value.offsetHeight/t.value.scrollHeight;h.sizeRaw=l*t.value.offsetHeight,h.size=l*100,h.pos=t.value.scrollTop/(t.value.scrollHeight-t.value.offsetHeight)*(100-h.size),l>=1&&(h.show=!1)}f("scroll",t.value.scrollLeft,t.value.scrollTop)}}function m(l=!1){if(!t.value)return;let v=V.value,w=_.value;const i=v&&(d!==t.value.scrollWidth||P!==t.value.offsetWidth),te=_&&(p!==t.value.scrollHeight||R!==t.value.offsetHeight);if(!l&&!i&&!te)return;const D=window.getComputedStyle(t.value);(D.overflow==="hidden"||D.overflowX==="hidden")&&(v=!1),(D.overflow==="hidden"||D.overflowY==="hidden")&&(w=!1),y.show=v,h.show=w,u(),P=t.value.offsetWidth,R=t.value.offsetHeight,d=t.value.scrollWidth,p=t.value.scrollHeight,f("resized",d,p)}function j(l){var v;s.scroll=="horizontal"&&(l.deltaMode==0&&((v=t.value)==null||v.scrollTo({left:t.value.scrollLeft+(l.deltaY>0?at:-140),behavior:"smooth"})),l.preventDefault(),l.stopPropagation())}function g(l){var v;l.deltaMode==0&&((v=t.value)==null||v.scrollTo({left:t.value.scrollLeft+(l.deltaY>0?at:-140),behavior:"smooth"}),l.preventDefault(),l.stopPropagation())}function T(l){var v;l.deltaMode==0&&((v=t.value)==null||v.scrollTo({top:t.value.scrollTop+(l.deltaY>0?Xt:-70),behavior:"smooth"}),l.preventDefault(),l.stopPropagation())}let F=0,E=0,L=0,k=0;const $=nt({onDown(l){return!c.value||!b.value?!1:(F=l.offsetX,E=l.x-l.offsetX-b.value.offsetLeft,l.preventDefault(),O.value=!0,!0)},onMove(l,v,w){t.value&&c.value&&(ee(w.x-F-E),w.preventDefault(),w.stopPropagation())},onUp(){O.value=!1}}),G=nt({onDown(l){return!x.value||!C.value?!1:(L=l.offsetY,k=l.y-l.offsetY-C.value.offsetTop,l.preventDefault(),O.value=!0,!0)},onMove(l,v,w){t.value&&x.value&&(ue(w.y-L-k),w.preventDefault(),w.stopPropagation())},onUp(){O.value=!1}});function Z(l){t.value&&(t.value.scrollLeft=l/100*(t.value.scrollWidth-t.value.offsetWidth))}function Q(l){t.value&&(t.value.scrollLeft=l/100*(t.value.scrollHeight-t.value.offsetHeight))}function ee(l){t.value&&(t.value.scrollLeft=l/(t.value.offsetWidth-y.sizeRaw)*(t.value.scrollWidth-t.value.offsetWidth))}function ue(l){t.value&&(t.value.scrollTop=l/(t.value.offsetHeight-h.sizeRaw)*(t.value.scrollHeight-t.value.offsetHeight))}function H(l){s.scrollBarBackgroundClickable&&ee(l.offsetX-y.sizeRaw/2)}function he(l){s.scrollBarBackgroundClickable&&ue(l.offsetY-h.sizeRaw/2)}const{startResizeChecker:Me,stopResizeChecker:r}=Zt(t,()=>m(),()=>m());return We(()=>{ce(()=>{setTimeout(()=>m(!0),200),m(!0),Me(),B=new MutationObserver(()=>m()),B.observe(t.value,W)})}),_e(()=>{r(),B&&(B.disconnect(),B=null)}),n({refreshScrollState(){m(!0)},getScrollContainer(){return t.value},scrollTo(l,v){var w;(w=t.value)==null||w.scrollTo(l,v)},scrollToTop(){var l;(l=t.value)==null||l.scrollTo(0,0)},scrollToBottom(){var l;(l=t.value)==null||l.scrollTo(t.value.scrollWidth,t.value.scrollHeight)}}),(l,v)=>(M(),K("div",{ref_key:"scrollrect",ref:S,class:de(["vue-scroll-rect",e.scrollBarAlwaysShow?"always-show-scrollbar":"",e.scrollBarBackgroundClickable?"background-clickable":"",O.value?"dragging":""]),style:be({width:e.width?`${e.width}px`:void 0,height:e.height?`${e.height}px`:void 0}),onWheel:j},[X("div",{ref_key:"container",ref:t,class:de(["scroll-content",e.scroll,e.containerClass]),style:be(ie({maxWidth:e.maxWidth?`${e.maxWidth}px`:void 0,maxHeight:e.maxHeight?`${e.maxHeight}px`:void 0},e.containerStyle)),onScroll:u},[Y(l.$slots,"default")],38),y.show?Y(l.$slots,"scrollBarX",{key:0,scrollBarValue:y,onScroll:Z},()=>[X("div",{ref_key:"scrollBarRefX",ref:c,class:"scrollbar horizontal",onClick:H,onWheel:g},[X("div",{class:"thumb",ref_key:"scrollBarThumbRefX",ref:b,style:be({left:`${y.pos}%`,width:`${y.size}%`}),onMousedown:v[0]||(v[0]=(...w)=>o($)&&o($)(...w)),onWheel:g},null,36)],544)]):N("",!0),h.show?Y(l.$slots,"scrollBarY",{key:1,scrollBarValue:h,onScroll:Q},()=>[h.show?(M(),K("div",{key:0,ref_key:"scrollBarRefY",ref:x,class:"scrollbar vertical",onClick:he,onWheel:T},[X("div",{class:"thumb",ref_key:"scrollBarThumbRefY",ref:C,style:be({top:`${h.pos}%`,height:`${h.size}%`}),onMousedown:v[1]||(v[1]=(...w)=>o(G)&&o(G)(...w)),onWheel:T},null,36)],544)):N("",!0)]):N("",!0)],38))}}),De=(e,n)=>{const a=e.__vccOpts||e;for(const[s,f]of n)a[s]=f;return a},Qt={},Jt={class:"mx-checked-mark","aria-hidden":"true",viewBox:"0 0 1024 1024"},qt=X("path",{d:"M129.3,428.6L52,512l345,372.5l575-620.8l-69.5-75L400.4,718.2L129.3,428.6z"},null,-1),el=[qt];function tl(e,n){return M(),K("svg",Jt,el)}const ll=De(Qt,[["render",tl]]),nl={},ol={class:"mx-right-arrow","aria-hidden":"true",viewBox:"0 0 1024 1024"},al=X("path",{d:"M307.018 49.445c11.517 0 23.032 4.394 31.819 13.18L756.404 480.18c8.439 8.438 13.181 19.885 13.181 31.82s-4.741 23.38-13.181 31.82L338.838 961.376c-17.574 17.573-46.065 17.573-63.64-0.001-17.573-17.573-17.573-46.065 0.001-63.64L660.944 512 275.198 126.265c-17.574-17.573-17.574-46.066-0.001-63.64C283.985 53.839 295.501 49.445 307.018 49.445z"},null,-1),sl=[al];function ul(e,n){return M(),K("svg",ol,sl)}const il=De(nl,[["render",ul]]),rl={class:"mx-item-row"},cl=["xlink:href"],dl={key:1,class:"label"},fl={class:"mx-item-row"},vl={class:"mx-shortcut"},ze=se({__name:"ContextMenuItem",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},customRender:{type:Function,default:null},customClass:{type:String,default:""},clickHandler:{type:Function,default:null},label:{type:[String,Object,Function],default:""},icon:{type:[String,Object,Function],default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},hasChildren:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},clickableWhenHasChildren:{type:Boolean,default:!1},rawMenuItem:{type:Object,default:void 0}},emits:["click","subMenuOpen","subMenuClose"],setup(e,{expose:n,emit:a}){const s=e,f=a,{clickHandler:t,clickClose:S,clickableWhenHasChildren:c,disabled:x,hidden:b,label:C,icon:O,iconFontClass:V,showRightArrow:_,shortcut:y,hasChildren:h}=ve(s),d=I(!1),p=I(!1),P=I(),R=z("globalOptions"),B=z("globalHasSlot"),W=z("globalRenderSlot"),u=z("globalCloseMenu"),m=z("menuContext"),j=$e(()=>typeof C.value=="string"?C.value:typeof C.value=="function"?Nt(C.value.toString()):"MenuItem[unknow]");J("MenuItemName",j);const g={getSubMenuInstance:()=>{},showSubMenu:()=>d.value?(m.markActiveMenuItem(g,!0),!0):h.value?(F(),!0):!1,hideSubMenu:()=>{m.closeOtherSubMenu()},isDisabledOrHidden:()=>x.value||b.value,getElement:()=>P.value,focus:()=>p.value=!0,blur:()=>p.value=!1,click:T};J("menuItemInstance",g),We(()=>{m.isMenuItemDataCollectedFlag()?ce(()=>{let k=0;const $=m.getElement();if($){let G=0;for(let Z=0;Z<$.children.length;Z++){const Q=$.children[Z];if(Q.getAttribute("data-type")==="ContextMenuItem"){if(Q===P.value){k=G;break}G++}}}m.addChildMenuItem(g,k)}):m.addChildMenuItem(g)}),_e(()=>{m.removeChildMenuItem(g)});function T(k){if(!x.value){if(k){const $=k.target;if($.classList.contains("mx-context-no-clickable")||R.value.ignoreClickClassName&&$.classList.contains(R.value.ignoreClickClassName))return;if(R.value.clickCloseClassName&&$.classList.contains(R.value.clickCloseClassName)){k.stopPropagation(),u(s.rawMenuItem);return}}h.value?c.value?(typeof t.value=="function"&&t.value(k),f("click",k)):d.value||F():(typeof t.value=="function"&&t.value(k),f("click",k),S.value&&u(s.rawMenuItem))}}function F(k){p.value=!1,m.checkCloseOtherSubMenuTimeOut()||m.closeOtherSubMenu(),x.value||(m.markActiveMenuItem(g),h.value&&(k||m.markThisOpenedByKeyBoard(),m.addOpenedSubMenu(E),d.value=!0,ce(()=>f("subMenuOpen",g))))}function E(){p.value=!1,d.value=!1,f("subMenuClose",g)}function L(){return{disabled:x.value,label:C.value,icon:O.value,iconFontClass:V.value,showRightArrow:_.value,clickClose:S.value,clickableWhenHasChildren:c.value,shortcut:y.value,theme:R.value.theme,isOpen:d,hasChildren:h,onClick:T,onMouseEnter:F,closeMenu:u}}return n(g),(k,$)=>o(b)?N("",!0):(M(),K("div",{key:0,class:"mx-context-menu-item-wrapper",ref_key:"menuItemRef",ref:P,"data-type":"ContextMenuItem"},[o(B)("itemRender")?(M(),A(o(le),{key:0,vnode:()=>o(W)("itemRender",L())},null,8,["vnode"])):e.customRender?(M(),A(o(le),{key:1,vnode:e.customRender,data:L()},null,8,["vnode","data"])):(M(),K("div",{key:2,class:de(["mx-context-menu-item",o(x)?"disabled":"",p.value?"keyboard-focus":"",e.customClass?" "+e.customClass:"",d.value?"open":""]),onClick:T,onMouseenter:F},[Y(k.$slots,"default",{},()=>[X("div",rl,[X("div",{class:de(["mx-icon-placeholder",e.preserveIconWidth?"preserve-width":""])},[Y(k.$slots,"icon",{},()=>[o(B)("itemIconRender")?(M(),A(o(le),{key:0,vnode:()=>o(W)("itemIconRender",L())},null,8,["vnode"])):typeof e.svgIcon=="string"&&e.svgIcon?(M(),K("svg",Le({key:1,class:"icon svg"},e.svgProps),[X("use",{"xlink:href":e.svgIcon},null,8,cl)],16)):typeof o(O)!="string"?(M(),A(o(le),{key:2,vnode:o(O),data:o(O)},null,8,["vnode","data"])):typeof o(O)=="string"&&o(O)!==""?(M(),K("i",{key:3,class:de(o(O)+" icon "+o(V)+" "+o(R).iconFontClass)},null,2)):N("",!0)]),e.checked?Y(k.$slots,"check",{key:0},()=>[o(B)("itemCheckRender")?(M(),A(o(le),{key:0,vnode:()=>o(W)("itemCheckRender",L())},null,8,["vnode"])):N("",!0),U(ll)]):N("",!0)],2),Y(k.$slots,"label",{},()=>[o(B)("itemLabelRender")?(M(),A(o(le),{key:0,vnode:()=>o(W)("itemLabelRender",L())},null,8,["vnode"])):typeof o(C)=="string"?(M(),K("span",dl,Te(o(C)),1)):(M(),A(o(le),{key:2,vnode:o(C),data:o(C)},null,8,["vnode","data"]))])]),X("div",fl,[o(y)||k.$slots.shortcut?Y(k.$slots,"shortcut",{key:0},()=>[o(B)("itemShortcutRender")?(M(),A(o(le),{key:0,vnode:()=>o(W)("itemShortcutRender",L())},null,8,["vnode"])):N("",!0),X("span",vl,Te(o(y)),1)]):N("",!0),o(_)?Y(k.$slots,"rightArrow",{key:1},()=>[o(B)("itemRightArrowRender")?(M(),A(o(le),{key:0,vnode:()=>o(W)("itemRightArrowRender",L())},null,8,["vnode"])):N("",!0),U(il)]):N("",!0)])])],34)),Y(k.$slots,"submenu",{context:g,show:d.value})],512))}}),hl=se({name:"ContextMenuSperator",components:{VNodeRender:le},setup(){const e=z("globalHasSlot"),n=z("globalRenderSlot");return{globalHasSlot:e,globalRenderSlot:n}}}),ml={key:1,class:"mx-context-menu-item-sperator mx-context-no-clickable"};function pl(e,n,a,s,f,t){const S=ae("VNodeRender");return e.globalHasSlot("separatorRender")?(M(),A(S,{key:0,vnode:()=>e.globalRenderSlot("separatorRender",{})},null,8,["vnode"])):(M(),K("div",ml))}const ke=De(hl,[["render",pl]]),je=se({__name:"ContextSubMenu",props:{items:{type:Object,default:null},show:{type:Boolean,default:!1},maxHeight:{type:Number,default:0},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0},adjustPosition:{type:Boolean,default:!0},direction:{type:String,default:"br"},parentMenuItemContext:{type:Object,default:null}},emits:["closeAnimFinished"],setup(e,{expose:n,emit:a}){const s=e,f=a,t=I(!1),S=z("globalGetMenuHostId",""),c=z("menuContext"),x=z("globalOptions");z("globalHasSlot"),z("globalRenderSlot");const b=I("UnknowOrRoot"),C=z("MenuItemName",b),{zIndex:O,getParentWidth:V,getParentHeight:_,getZoom:y}=c,{adjustPosition:h}=ve(s),d=I(),p=I(),P=I(),R=[],B=z("globalSetCurrentSubMenu"),W=[];let u=null,m=0;function j(){u&&u.blur()}function g(r,l){if(r){for(let v=l!==void 0?l:0;v<W.length;v++)if(!W[v].isDisabledOrHidden()){T(v);break}}else for(let v=l!==void 0?l:W.length-1;v>=0;v--)if(!W[v].isDisabledOrHidden()){T(v);break}}function T(r){if(u&&j(),r!==void 0&&(u=W[Math.max(0,Math.min(r,W.length-1))]),!u)return;u.focus();const l=u.getElement();l&&l.scrollIntoView({behavior:"auto",block:"nearest",inline:"nearest"})}function F(){B(E)}const E={el:P,name:C,isTopLevel:()=>c.getParentContext()===null,closeSelfAndActiveParent:()=>{const r=$.getParentContext();if(r){r.closeOtherSubMenu();const l=r.getSubMenuInstanceContext();if(l)return l.focusCurrentItem(),!0}return!1},closeCurrentSubMenu:()=>{var r;return(r=$.getParentContext())==null?void 0:r.closeOtherSubMenu()},moveCurrentItemFirst:()=>g(!0),moveCurrentItemLast:()=>g(!1),moveCurrentItemDown:()=>g(!0,u?W.indexOf(u)+1:0),moveCurrentItemUp:()=>g(!1,u?W.indexOf(u)-1:0),focusCurrentItem:()=>T(),openCurrentItemSubMenu:()=>u?u==null?void 0:u.showSubMenu():!1,triggerCurrentItemClick:r=>u==null?void 0:u.click(r)};let L=!1,k=!1;const $={zIndex:O+1,container:c.container,adjustPadding:x.value.adjustPadding||ne.defaultAdjustPadding,getParentWidth:()=>{var r;return((r=P.value)==null?void 0:r.offsetWidth)||0},getParentHeight:()=>{var r;return((r=P.value)==null?void 0:r.offsetHeight)||0},getPositon:()=>[H.value.x,H.value.y],getZoom:()=>x.value.zoom||ne.defaultZoom,addOpenedSubMenu(r){R.push(r)},closeOtherSubMenu(){R.forEach(r=>r()),R.splice(0,R.length),B(E)},checkCloseOtherSubMenuTimeOut(){return m?(clearTimeout(m),m=0,!0):!1},closeOtherSubMenuWithTimeOut(){m=setTimeout(()=>{m=0,this.closeOtherSubMenu()},200)},addChildMenuItem:(r,l)=>{l===void 0?W.push(r):W.splice(l,0,r)},removeChildMenuItem:r=>{W.splice(W.indexOf(r),1),r.getSubMenuInstance=()=>{}},markActiveMenuItem:(r,l=!1)=>{j(),u=r,l&&T()},markThisOpenedByKeyBoard:()=>{L=!0},isOpenedByKeyBoardFlag:()=>L?(L=!1,!0):!1,isMenuItemDataCollectedFlag:()=>k,getElement:()=>P.value||null,getParentContext:()=>c,getSubMenuInstanceContext:()=>E};J("menuContext",$);const G={getChildItem:r=>W[r],getMenuDimensions:()=>p.value?{width:p.value.offsetWidth,height:p.value.offsetHeight}:{width:0,height:0},getSubmenuRoot:()=>p.value,getMenu:()=>P.value,getScrollValue:()=>{var r,l;return((l=(r=d.value)==null?void 0:r.getScrollContainer())==null?void 0:l.scrollTop)||0},setScrollValue:r=>{var l;return(l=d.value)==null?void 0:l.scrollTo(0,r)},getScrollHeight:()=>Q.value,adjustPosition:()=>{he()},getMaxHeight:()=>ee.value,getPosition:()=>H.value,setPosition:(r,l)=>{H.value.x=r,H.value.y=l}},Z=z("menuItemInstance",void 0);Z&&(Z.getSubMenuInstance=()=>G);const Q=I(0),ee=I(0),ue=I(!1),H=I({x:0,y:0});function he(){ce(()=>{var w,i;var r;const l=P.value,v=p.value;if(l&&v&&d.value){const{container:te}=c,D=(w=V==null?void 0:V())!=null?w:0,oe=(i=_==null?void 0:_())!=null?i:0,Fe=getComputedStyle(v),Se=parseFloat(Fe.paddingLeft),we=parseFloat(Fe.paddingTop),He=oe>0?we:0,ht=document.documentElement.scrollHeight/y(),mt=document.documentElement.scrollWidth/y(),pt=Math.min(mt,te.offsetWidth),Ee=Math.min(ht,te.offsetHeight);let Re=Ce(l,te),Oe=xe(l,te);if(s.direction.includes("l")?H.value.x-=l.offsetWidth+Se:s.direction.includes("r")?H.value.x+=D+Se:(H.value.x+=D/2,H.value.x-=(l.offsetWidth+Se)/2),s.direction.includes("t")){const me=(r=s.parentMenuItemContext)==null?void 0:r.getElement();me&&(H.value.y+=me.offsetHeight),H.value.y-=(l.offsetHeight+we)/y()}else s.direction.includes("b")?H.value.y-=we/y():H.value.y-=l.offsetHeight/2/y();ce(()=>{var me,Ne;Re=Ce(l,te),Oe=xe(l,te);const Ve=((Ne=(me=d.value)==null?void 0:me.getScrollContainer())==null?void 0:Ne.scrollHeight)||0,gt=s.maxHeight;Q.value=s.maxHeight?Math.min(Ve,s.maxHeight):Ve;const bt=Re+l.offsetWidth-pt,Ue=Oe+Q.value+He*2-Ee;if(ue.value=Ue>0,h.value&&bt>0){const pe=D+l.offsetWidth-Se,ge=Re;pe>ge?H.value.x-=ge:H.value.x-=pe}if(ue.value){if(h.value){const pe=Ue,ge=Oe;pe>ge?H.value.y-=ge-He:H.value.y-=pe-He}ee.value=Ee-(H.value.y+we)}else ee.value=gt||0})}})}function Me(){var r;const l=(r=s.parentMenuItemContext)==null?void 0:r.getElement();if(l){const v=Ce(l,c.container),w=xe(l,c.container);H.value.x=v,H.value.y=w}else{const[v,w]=c.getPositon();H.value.x=v,H.value.y=w}ce(()=>{var v;B(E),(v=P.value)==null||v.focus({preventScroll:!0}),c.isOpenedByKeyBoardFlag()&&ce(()=>g(!0)),k=!0}),he()}return Ae(()=>s.show,r=>{r&&Me()}),We(()=>{t.value=!0,s.show?Me():he()}),_e(()=>{t.value=!1,Z&&(Z.getSubMenuInstance=()=>{})}),n(G),(r,l)=>{const v=ae("ContextSubMenu",!0);return t.value?(M(),A(ct,{key:0,to:`#${o(S)}`},[U(It,Le({appear:""},o(x).menuTransitionProps||{duration:10},{onAfterLeave:l[0]||(l[0]=w=>f("closeAnimFinished"))}),{default:q(()=>{var w;return[e.show?(M(),K("div",Le({key:0,ref_key:"submenuRoot",ref:p},r.$attrs,{class:["mx-context-menu",o(x).customClass?o(x).customClass:"",(w=o(x).theme)!=null?w:""],style:{maxWidth:e.maxWidth?o(et)(e.maxWidth):`${o(ne).defaultMaxWidth}px`,minWidth:e.minWidth?o(et)(e.minWidth):`${o(ne).defaultMinWidth}px`,zIndex:o(O),left:`${H.value.x}px`,top:`${H.value.y}px`},"data-type":"ContextSubMenu",onClick:F}),[U(o(Gt),{ref_key:"scrollRectRef",ref:d,scroll:"vertical",maxHeight:ee.value,containerClass:"mx-context-menu-scroll"},{default:q(()=>[X("div",{class:de(["mx-context-menu-items"]),ref_key:"menu",ref:P},[Y(r.$slots,"default",{},()=>[(M(!0),K(Ze,null,rt(e.items,(i,te)=>(M(),K(Ze,{key:te},[i.hidden!==!0&&i.divided==="up"?(M(),A(ke,{key:0})):N("",!0),i.hidden!==!0&&i.divided==="self"?(M(),A(ke,{key:1})):(M(),A(ze,{key:2,clickHandler:i.onClick?D=>i.onClick(D):void 0,disabled:typeof i.disabled=="object"?i.disabled.value:i.disabled,hidden:typeof i.hidden=="object"?i.hidden.value:i.hidden,icon:i.icon,iconFontClass:i.iconFontClass,svgIcon:i.svgIcon,svgProps:i.svgProps,label:i.label,customRender:i.customRender,customClass:i.customClass,checked:typeof i.checked=="object"?i.checked.value:i.checked,shortcut:i.shortcut,clickClose:i.clickClose,clickableWhenHasChildren:i.clickableWhenHasChildren,preserveIconWidth:i.preserveIconWidth!==void 0?i.preserveIconWidth:o(x).preserveIconWidth,showRightArrow:i.children&&i.children.length>0,hasChildren:i.children&&i.children.length>0,rawMenuItem:i,onSubMenuOpen:D=>{var oe;return(oe=i.onSubMenuOpen)==null?void 0:oe.call(i,D)},onSubMenuClose:D=>{var oe;return(oe=i.onSubMenuClose)==null?void 0:oe.call(i,D)}},it({_:2},[i.children&&i.children.length>0?{name:"submenu",fn:q(({context:D,show:oe})=>[U(v,{show:oe,parentMenuItemContext:D,items:i.children,maxWidth:i.maxWidth,minWidth:i.minWidth,maxHeight:i.maxHeight,adjustPosition:i.adjustSubMenuPosition!==void 0?i.adjustSubMenuPosition:o(x).adjustPosition,direction:i.direction!==void 0?i.direction:o(x).direction},null,8,["show","parentMenuItemContext","items","maxWidth","minWidth","maxHeight","adjustPosition","direction"])]),key:"0"}:void 0]),1032,["clickHandler","disabled","hidden","icon","iconFontClass","svgIcon","svgProps","label","customRender","customClass","checked","shortcut","clickClose","clickableWhenHasChildren","preserveIconWidth","showRightArrow","hasChildren","rawMenuItem","onSubMenuOpen","onSubMenuClose"])),i.hidden!==!0&&(i.divided==="down"||i.divided===!0)?(M(),A(ke,{key:3})):N("",!0)],64))),128))])],512)]),_:3},8,["maxHeight"])],16)):N("",!0)]}),_:3},16)],8,["to"])):N("",!0)}}}),vt=se({__name:"ContextSubMenuWrapper",props:{options:{type:Object,default:null},show:{type:null,default:null},container:{type:Object,default:null},isFullScreenContainer:{type:Boolean,default:!0}},emits:["close","closeAnimFinished"],setup(e,{expose:n,emit:a}){const s=e,f=a,t=ut(),S=I(),{options:c,show:x,container:b}=ve(s);We(()=>{x.value&&V()}),_e(()=>{d()}),Ae(x,u=>{u?V():(qe(C),d())});const C={closeMenu:_,isClosed:y,getMenuRef:()=>S.value,getMenuDimensions:()=>{var m;var u;return(m=(u=S.value)==null?void 0:u.getMenuDimensions())!=null?m:{width:0,height:0}}};let O=!1;function V(){h(),zt(C)}function _(u){O=!0,f("close",u),c.value.menuTransitionProps||f("closeAnimFinished"),qe(C)}function y(){return O}function h(){setTimeout(()=>{document.addEventListener("click",B,!0),document.addEventListener("contextmenu",B,!0),document.addEventListener("scroll",R,!0),!s.isFullScreenContainer&&b.value&&b.value.addEventListener("scroll",R,!0),c.value.keyboardControl!==!1&&document.addEventListener("keydown",P,!0)},50)}function d(){document.removeEventListener("contextmenu",B,!0),document.removeEventListener("click",B,!0),document.removeEventListener("scroll",R,!0),!s.isFullScreenContainer&&b.value&&b.value.removeEventListener("scroll",R,!0),c.value.keyboardControl!==!1&&document.removeEventListener("keydown",P,!0)}const p=I();J("globalSetCurrentSubMenu",u=>p.value=u),J("globalGetMenuHostId",b.value.id);function P(u){var m,j,g,T,F,E,L,k,$,G,Z,Q,ee;let ue=!0;switch(u.key){case"Escape":{((m=p.value)==null?void 0:m.isTopLevel())===!1?(j=p.value)==null||j.closeCurrentSubMenu():_();break}case"ArrowDown":(g=p.value)==null||g.moveCurrentItemDown();break;case"ArrowUp":(T=p.value)==null||T.moveCurrentItemUp();break;case"Home":(F=p.value)==null||F.moveCurrentItemFirst();break;case"End":(E=p.value)==null||E.moveCurrentItemLast();break;case"ArrowLeft":{(L=p.value)!=null&&L.closeSelfAndActiveParent()||($=(k=c.value).onKeyFocusMoveLeft)==null||$.call(k);break}case"ArrowRight":(G=p.value)!=null&&G.openCurrentItemSubMenu()||(Q=(Z=c.value).onKeyFocusMoveRight)==null||Q.call(Z);break;case"Enter":(ee=p.value)==null||ee.triggerCurrentItemClick(u);break;default:ue=!1;break}ue&&p.value&&(u.stopPropagation(),u.preventDefault())}function R(u){c.value.closeWhenScroll!==!1&&W(u.target,null)}function B(u){W(u.target,u)}function W(u,m){for(var j,g;u;){if(u.classList&&u.classList.contains("mx-context-menu"))return;u=u.parentNode}m?c.value.clickCloseOnOutside!==!1?(d(),_()):(g=(j=c.value).onClickOnOutside)==null||g.call(j,m):(d(),_())}return J("globalOptions",c),J("globalCloseMenu",_),J("globalIsFullScreenContainer",s.isFullScreenContainer),J("globalHasSlot",u=>t[u]!==void 0),J("globalRenderSlot",(u,m)=>Y(t,u,ie({},m),()=>[fe("span","Render slot failed")],!1)),J("menuContext",{zIndex:c.value.zIndex||ne.defaultZindex,container:b.value,adjustPadding:{x:0,y:0},getZoom:()=>c.value.zoom||ne.defaultZoom,getParentWidth:()=>0,getParentHeight:()=>0,getPositon:()=>[c.value.x,c.value.y],closeOtherSubMenuWithTimeOut:()=>{},checkCloseOtherSubMenuTimeOut:()=>!1,addOpenedSubMenu:()=>{},closeOtherSubMenu:()=>{},getParentContext:()=>null,getSubMenuInstanceContext:()=>null,getElement:()=>null,addChildMenuItem:()=>{},removeChildMenuItem:()=>{},markActiveMenuItem:()=>{},markThisOpenedByKeyBoard:()=>{},isOpenedByKeyBoardFlag:()=>!1,isMenuItemDataCollectedFlag:()=>!1}),n(C),(u,m)=>(M(),A(je,{ref_key:"submenuInstance",ref:S,show:o(x),items:o(c).items,adjustPosition:o(c).adjustPosition,maxWidth:o(c).maxWidth||o(ne).defaultMaxWidth,minWidth:o(c).minWidth||o(ne).defaultMinWidth,maxHeight:o(c).maxHeight,direction:o(c).direction||o(ne).defaultDirection,onCloseAnimFinished:m[0]||(m[0]=j=>f("closeAnimFinished"))},{default:q(()=>[Y(u.$slots,"default")]),_:3},8,["show","items","adjustPosition","maxWidth","minWidth","maxHeight","direction"]))}}),gl=se({__name:"ContextMenu",props:{options:{type:Object,default:null},show:{type:Boolean,default:!1}},emits:["update:show","close"],setup(e,{expose:n,emit:a}){const s=a,f=e,{options:t,show:S}=ve(f),{isNew:c,container:x,eleId:b}=ft(t.value),C=I(null),O=ut();function V(_){var y,h;s("update:show",!1),s("close"),(h=(y=t.value).onClose)==null||h.call(y,_)}return n({closeMenu:()=>s("update:show",!1),isClosed:()=>!S.value,getMenuRef:()=>{var _;return(_=C.value)==null?void 0:_.getMenuRef()},getMenuDimensions:()=>{var y;var _;return(y=(_=C.value)==null?void 0:_.getMenuDimensions())!=null?y:{width:0,height:0}}}),(_,y)=>(M(),A(ct,{to:`#${o(b)}`},[U(vt,{ref_key:"menuRef",ref:C,options:o(t),show:o(S),container:o(x),isFullScreenContainer:!o(c),onClose:V},it({_:2},[rt(o(O),(h,d)=>({name:d,fn:q(p=>[Y(_.$slots,d,St(wt(p)))])}))]),1032,["options","show","container","isFullScreenContainer"])],8,["to"]))}}),bl=se({name:"ContextMenuGroup",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},clickHandler:{type:Function,default:null},label:{type:String,default:""},icon:{type:String,default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},adjustSubMenuPosition:{type:Boolean,default:void 0},maxHeight:{type:[String,Number],default:0},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0}},setup(e,n){const a=z("globalOptions"),{adjustSubMenuPosition:s,maxWidth:f,minWidth:t,maxHeight:S}=ve(e),c=typeof s.value<"u"?s.value:a.value.adjustPosition,x=I(),b=I();return n.expose({getSubMenuRef:()=>x.value,getMenuItemRef:()=>b.value}),()=>fe(ze,Ie(ie({},e),{ref:b,showRightArrow:!0,maxWidth:void 0,minWidth:void 0,maxHeight:void 0,adjustSubMenuPosition:void 0,hasChildren:typeof n.slots.default!==void 0}),n.slots.default?ie({submenu:C=>fe(je,{ref:x,show:C.show,maxWidth:f.value,minWidth:t.value,maxHeight:S.value,adjustPosition:c,parentMenuItemContext:C.context},{default:n.slots.default})},Vt(n.slots,"default")):n.slots)}});function yl(e,n,a,s){const f=I(!0),t=fe(vt,{options:e,show:f,container:n,isFullScreenContainer:!a,onCloseAnimFinished:()=>{Xe(null,n)},onClose:S=>{var c;(c=e.onClose)==null||c.call(e,S),f.value=!1}},s);return Xe(t,n),t.component}function st(e,n){const a=ft(e);return yl(e,a.container,a.isNew,n).exposed}const xl={install(e){e.config.globalProperties.$contextmenu=st,e.component("ContextMenu",gl),e.component("ContextMenuItem",ze),e.component("ContextMenuGroup",bl),e.component("ContextMenuSperator",ke),e.component("ContextMenuSeparator",ke),e.component("ContextSubMenu",je)},showContextMenu(e,n){return st(e,n)},isAnyContextMenuOpen(){return Dt()},closeContextMenu:dt,transformMenuPosition:jt},Cl={class:"h-full bg-bg_color overflow-hidden relative",style:{minHeight:"calc(100vh - 141px)"}},kl={class:"flex items-center h-[34px]"},Ml=se({__name:"tree",emits:["tree-select"],setup(e,{emit:n}){const a=n,s=I(),f=I(""),t=I({}),S={children:"children",label:"name"},{isDark:c}=Wt(),{treeLoading:x,treeData:b,openDictDialog:C,getDictTreeData:O}=Bt(),V=(h,d)=>h?`${d.name}（${d.code}）`.includes(h):!0;function _(h){var p,P;const d=h.$treeNodeId;t.value[d]=(p=t.value[d])!=null&&p.highlight?Object.assign({id:d},t.value[d],{highlight:!1}):Object.assign({id:d},t.value[d],{highlight:!0}),Object.values(t.value).forEach(R=>{R.id!==d&&(R.highlight=!1)}),a("tree-select",(P=t.value[d])!=null&&P.highlight?Object.assign(Ie(ie({},h),{selected:!0})):Object.assign(Ie(ie({},h),{selected:!1})))}function y(h,{name:d,data:p}){h.preventDefault(),xl.showContextMenu({x:h.x,y:h.y,theme:c.value?"dark":"default",items:[{label:"修改",icon:fe(Pe($t)),onClick:()=>{C("修改",p)}},{label:"删除",icon:fe(Pe(At)),onClick:()=>{Rt.confirm(`确定要删除 <strong style='color:var(--el-color-primary)'>${d}</strong> 字典吗?`,"系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0,draggable:!0}).then(()=>{O(),Ot("已成功删除",{type:"success"})})}}]})}return Ae(f,h=>{s.value.filter(h)}),(h,d)=>{const p=ae("IconifyIconOffline"),P=ae("el-icon"),R=ae("el-input"),B=ae("el-divider"),W=ae("el-tree"),u=ae("el-scrollbar"),m=ae("el-button"),j=_t("loading");return Qe((M(),K("div",Cl,[X("div",kl,[U(R,{modelValue:f.value,"onUpdate:modelValue":d[0]||(d[0]=g=>f.value=g),class:"mx-2",size:"small",placeholder:"请输入字典名称",clearable:""},{suffix:q(()=>[U(P,{class:"el-input__icon"},{default:q(()=>[Qe(U(p,{icon:"ri/search-line"},null,512),[[Ht,f.value.length===0]])]),_:1})]),_:1},8,["modelValue"])]),U(B),U(u,{height:"calc(90vh - 150px)"},{default:q(()=>[U(W,{ref_key:"treeRef",ref:s,data:o(b),"node-key":"id",size:"small",props:S,"default-expand-all":"","expand-on-click-node":!1,"filter-node-method":V,onNodeClick:_},{default:q(({node:g,data:T})=>{var F,E,L;return[U(o(Lt),{class:de(["w-full!","p-1!","mt-2!","mr-2!","rounded","select-none","hover:text-primary",f.value.trim().length>0&&`${g.label}（${T.code}）`.includes(f.value)&&"text-red-500!",(F=t.value[g.id])!=null&&F.highlight?"dark:text-primary!":""]),style:be({color:(E=t.value[g.id])!=null&&E.highlight?"var(--el-color-primary)":"",background:(L=t.value[g.id])!=null&&L.highlight?"var(--el-color-primary-light-7)":"transparent"}),onContextmenu:k=>y(k,{name:g.label,data:T})},{default:q(()=>[Je(Te(`${g.label}（${T.code}）`),1)]),_:2},1032,["class","style","onContextmenu"])]}),_:1},8,["data"])]),_:1}),U(m,{class:"w-[90%] absolute bottom-[22px] left-[50%] -translate-x-[50%]",type:"primary",icon:o(Pe)(o(Tt)),onClick:d[1]||(d[1]=g=>o(C)())},{default:q(()=>[...d[2]||(d[2]=[Je(" 新增字典 ",-1)])]),_:1},8,["icon"])])),[[j,o(x)]])}}}),Ll=Pt(Ml,[["__scopeId","data-v-68601043"]]);export{Ll as default};
