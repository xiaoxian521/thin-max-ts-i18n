var C=(o,c,n)=>new Promise((r,l)=>{var I=t=>{try{s(n.next(t))}catch(f){l(f)}},p=t=>{try{s(n.throw(t))}catch(f){l(f)}},s=t=>t.done?r(t.value):Promise.resolve(t.value).then(I,p);s((n=n.apply(o,c)).next())});import{z as U,ae as R,x as _,q as u,b as z,aV as E,aW as M,aE as y,r as W,aU as q,am as x}from"./index-Dh3K64Mq.js";import{_ as N}from"./dict.vue_vue_type_script_setup_true_lang-CBGux6tW.js";import{u as A,e as G}from"./index-Bpb1WbEE.js";import{g as J,a as K}from"./system-jZ8CCYOj.js";import"./rule-uSEkFWb4.js";function te(){const o=u(""),c=u(),n=u([]),r=u(!0),l=u({}),{switchStyle:I}=A(),p=u([]),s=u(!0),t=_({total:0,pageSize:10,currentPage:1,background:!0}),f=[{label:"字典标签",prop:"label",minWidth:130,cellRenderer:a=>z(W("el-button"),{size:"small",color:a.row.color},{default:()=>[a.row.label]})},{label:"字典值",prop:"value",minWidth:130},{label:"状态",prop:"status",minWidth:90,cellRenderer:a=>{var e;return z(W("el-switch"),{size:a.props.size==="small"?"small":"default",loading:(e=l.value[a.index])==null?void 0:e.loading,modelValue:a.row.status,"onUpdate:modelValue":i=>a.row.status=i,"active-value":1,"inactive-value":0,"active-text":"已启用","inactive-text":"已停用","inline-prompt":!0,style:I.value,onChange:()=>F(a)},null)}},{sortable:!0,label:"排序",minWidth:90,prop:"sort"},{label:"备注",minWidth:90,prop:"remark"},{label:"创建时间",minWidth:90,prop:"createTime",formatter:({createTime:a})=>E(a).format("YYYY-MM-DD HH:mm:ss")},{label:"操作",fixed:"right",width:180,slot:"operation"}];function F({row:a,index:e}){q.confirm(`确定要<strong>${a.status===0?"停用":"启用"}</strong><strong style='color:var(--el-color-primary)'>${a.label}</strong>字典标签吗?`,"系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0,draggable:!0}).then(()=>{l.value[e]=Object.assign({},l.value[e],{loading:!0}),setTimeout(()=>{l.value[e]=Object.assign({},l.value[e],{loading:!1}),y("已成功修改状态",{type:"success"})},300)}).catch(()=>{a.status===0?a.status=1:a.status=0})}function H(a){y(`您删除了字典标签为${a.label}的这条数据`,{type:"success"}),d()}function L(a){}function O(a){}function d(){return C(this,null,function*(){r.value=!0;const{code:a,data:e}=yield K({dictId:o.value});a===0&&(n.value=e.list,t.total=e.total,t.pageSize=e.pageSize,t.currentPage=e.currentPage),setTimeout(()=>{r.value=!1},500)})}function P({id:a,selected:e}){o.value=e?a:"",d()}function V(a="新增",e){var i,m,g,v,b,h;M({title:`${a}字典详情`,props:{formInline:{title:a,label:(i=e==null?void 0:e.label)!=null?i:"",value:(m=e==null?void 0:e.value)!=null?m:"",color:(g=e==null?void 0:e.color)!=null?g:"#6abe39",sort:(v=e==null?void 0:e.sort)!=null?v:999,status:(b=e==null?void 0:e.status)!=null?b:1,remark:(h=e==null?void 0:e.remark)!=null?h:""}},width:"32%",draggable:!0,fullscreen:R(),fullscreenIcon:!0,closeOnClickModal:!1,contentRenderer:()=>x(G,{ref:c,formInline:null}),beforeSure:(T,{options:D})=>{const k=c.value.getRef(),j=D.props.formInline;function $(){y(`您${a}了字典标签为${j.label}的这条数据`,{type:"success"}),T(),d()}k.validate(B=>{B&&$()})}})}function Y(a="新增",e){var i,m,g;M({title:`${a}字典`,props:{formInline:{title:a,name:(i=e==null?void 0:e.name)!=null?i:"",code:(m=e==null?void 0:e.code)!=null?m:"",remark:(g=e==null?void 0:e.remark)!=null?g:""}},width:"32%",draggable:!0,fullscreen:R(),fullscreenIcon:!0,closeOnClickModal:!1,contentRenderer:()=>x(N,{ref:c,formInline:null}),beforeSure:(v,{options:b})=>{const h=c.value.getRef(),T=b.props.formInline;function D(){y(`您${a}了字典名称为${T.name}的这条数据`,{type:"success"}),v(),S()}h.validate(k=>{k&&D()})}})}function S(){return C(this,null,function*(){s.value=!0;const{code:a,data:e}=yield J();setTimeout(()=>{a===0&&(p.value=e,s.value=!1)},200)})}return U(()=>{S(),d()}),{dictId:o,loading:r,columns:f,dataList:n,treeData:p,treeLoading:s,pagination:t,deviceDetection:R,onSearch:d,openDialog:V,onTreeSelect:P,handleDelete:H,openDictDialog:Y,getDictTreeData:S,handleSizeChange:L,handleCurrentChange:O}}export{te as useDict};
