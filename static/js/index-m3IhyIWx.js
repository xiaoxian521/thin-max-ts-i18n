var ue=Object.defineProperty;var H=Object.getOwnPropertySymbols;var ce=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var K=(e,a,n)=>a in e?ue(e,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[a]=n,I=(e,a)=>{for(var n in a||(a={}))ce.call(a,n)&&K(e,n,a[n]);if(H)for(var n of H(a))se.call(a,n)&&K(e,n,a[n]);return e};var L=(e,a,n)=>new Promise((S,s)=>{var m=u=>{try{c(n.next(u))}catch(h){s(h)}},g=u=>{try{c(n.throw(u))}catch(h){s(h)}},c=u=>u.done?S(u.value):Promise.resolve(u.value).then(m,g);c((n=n.apply(e,a)).next())});import{S as de}from"./sortable.esm-7jaD_3Ar.js";import{c as E,o as B,e as _,d as fe,p as v,a9 as b,M as ve,ap as he,b0 as D,t as O,b as t,ay as be,w as k,T as G,j as A,r as i,f as T,u as U,z as p,a0 as ge,F as xe,a4 as pe,a2 as me,A as Ce,b1 as we,aq as ye}from"./index-DgSZvdaR.js";import{u as ke}from"./epTheme-ClDNOHBr.js";const Ae={width:"32",height:"32",fill:"currentColor","data-icon":"holder",viewBox:"64 64 896 896"};function Ee(e,a){return B(),E("svg",Ae,a[0]||(a[0]=[_("path",{d:"M300 276.5a56 56 0 1 0 56-97 56 56 0 0 0-56 97m0 284a56 56 0 1 0 56-97 56 56 0 0 0-56 97M640 228a56 56 0 1 0 112 0 56 56 0 0 0-112 0m0 284a56 56 0 1 0 112 0 56 56 0 0 0-112 0M300 844.5a56 56 0 1 0 56-97 56 56 0 0 0-56 97M640 796a56 56 0 1 0 112 0 56 56 0 0 0-112 0"},null,-1)]))}const Be={render:Ee},_e={width:"32",height:"32",viewBox:"0 0 24 24"};function Me(e,a){return B(),E("svg",_e,a[0]||(a[0]=[_("path",{fill:"currentColor",d:"M22 4V2H2v2h9v14.17l-5.5-5.5-1.42 1.41L12 22l7.92-7.92-1.42-1.41-5.5 5.5V4z"},null,-1)]))}const Re={render:Me},$e={width:"32",height:"32",viewBox:"0 0 24 24"};function De(e,a){return B(),E("svg",$e,a[0]||(a[0]=[_("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4m-4 4a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"},null,-1)]))}const Te={render:De},Se={width:"32",height:"32",viewBox:"0 0 24 24"};function Ve(e,a){return B(),E("svg",Se,a[0]||(a[0]=[_("path",{fill:"currentColor",d:"M3.34 17a10 10 0 0 1-.978-2.326 3 3 0 0 0 .002-5.347A10 10 0 0 1 4.865 4.99a3 3 0 0 0 4.631-2.674 10 10 0 0 1 5.007.002 3 3 0 0 0 4.632 2.672A10 10 0 0 1 20.66 7c.433.749.757 1.53.978 2.326a3 3 0 0 0-.002 5.347 10 10 0 0 1-2.501 4.337 3 3 0 0 0-4.631 2.674 10 10 0 0 1-5.007-.002 3 3 0 0 0-4.632-2.672A10 10 0 0 1 3.34 17m5.66.196a5 5 0 0 1 2.25 2.77q.75.071 1.499.001A5 5 0 0 1 15 17.197a5 5 0 0 1 3.525-.565q.435-.614.748-1.298A5 5 0 0 1 18 12c0-1.26.47-2.437 1.273-3.334a8 8 0 0 0-.75-1.298A5 5 0 0 1 15 6.804a5 5 0 0 1-2.25-2.77q-.75-.071-1.499-.001A5 5 0 0 1 9 6.803a5 5 0 0 1-3.525.565 8 8 0 0 0-.748 1.298A5 5 0 0 1 6 12a5 5 0 0 1-1.273 3.334 8 8 0 0 0 .75 1.298A5 5 0 0 1 9 17.196M12 15a3 3 0 1 1 0-6 3 3 0 0 1 0 6m0-2a1 1 0 1 0 0-2 1 1 0 0 0 0 2"},null,-1)]))}const je={render:Ve},Fe={width:"32",height:"32",viewBox:"0 0 24 24"};function ze(e,a){return B(),E("svg",Fe,a[0]||(a[0]=[_("path",{fill:"currentColor",d:"M13.79 10.21a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42l-2.5-2.5a1 1 0 0 0-.33-.21 1 1 0 0 0-.76 0 1 1 0 0 0-.33.21l-2.5 2.5a1 1 0 0 0 1.42 1.42l.79-.8v5.18l-.79-.8a1 1 0 0 0-1.42 1.42l2.5 2.5a1 1 0 0 0 .33.21.94.94 0 0 0 .76 0 1 1 0 0 0 .33-.21l2.5-2.5a1 1 0 0 0-1.42-1.42l-.79.8V9.41ZM7 4h10a1 1 0 0 0 0-2H7a1 1 0 0 0 0 2m10 16H7a1 1 0 0 0 0 2h10a1 1 0 0 0 0-2"},null,-1)]))}const Ne={render:ze};function Ie(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!we(e)}const Oe={title:{type:String,default:"列表"},tableRef:{type:Object},columns:{type:Array,default:()=>[]},isExpandAll:{type:Boolean,default:!0},tableKey:{type:[String,Number],default:"0"}},Pe=fe({name:"PureTableBar",props:Oe,emits:["refresh","fullscreen"],setup(e,{emit:a,slots:n,attrs:S}){const s=v("default"),m=v(!1),g=v(!0),c=v(!1),u=v(!1),h=Ce(),C=v(e.isExpandAll),P=b(e==null?void 0:e.columns).filter(l=>ve(l==null?void 0:l.hide)?!l.hide:!(he(l==null?void 0:l.hide)&&(l!=null&&l.hide())));let x=D(b(e==null?void 0:e.columns),"label");const M=v(D(b(P),"label")),d=v(b(e==null?void 0:e.columns)),V=O(()=>l=>({background:l===s.value?ke().epThemeColor:"",color:l===s.value?"#fff":"var(--el-text-color-primary)"})),w=O(()=>["text-black","dark:text-white","duration-100","hover:text-primary!","cursor-pointer","outline-hidden"]),Z=O(()=>["flex","justify-between","pt-[3px]","px-[11px]","border-b-[1px]","border-solid","border-[#dcdfe6]","dark:border-[#303030]"]);function J(){m.value=!0,a("refresh"),pe(500).then(()=>m.value=!1)}function Q(){C.value=!C.value,q(e.tableRef.data,C.value)}function W(){c.value=!c.value,a("fullscreen",c.value)}function q(l,o){l.forEach(r=>{e.tableRef.toggleRowExpansion(r,o),r.children!==void 0&&r.children!==null&&q(r.children,o)})}function X(l){M.value=l?x:[],u.value=!1,d.value.map(o=>l?o.hide=!1:o.hide=!0)}function Y(l){M.value=l;const o=l.length;g.value=o===x.length,u.value=o>0&&o<x.length}function ee(l,o){d.value.filter(r=>p(r.label)===p(o))[0].hide=!l}function le(){return L(this,null,function*(){g.value=!0,u.value=!1,d.value=b(e==null?void 0:e.columns),x=[],x=yield D(b(e==null?void 0:e.columns),"label"),M.value=D(b(P),"label")})}const te={dropdown:()=>t(i("el-dropdown-menu"),{class:"translation"},{default:()=>[t(i("el-dropdown-item"),{style:V.value("large"),onClick:()=>s.value="large"},{default:()=>[T("宽松")]}),t(i("el-dropdown-item"),{style:V.value("default"),onClick:()=>s.value="default"},{default:()=>[T("默认")]}),t(i("el-dropdown-item"),{style:V.value("small"),onClick:()=>s.value="small"},{default:()=>[T("紧凑")]})]})},ae=l=>{l.preventDefault(),me(()=>{var r;const o=((r=h==null?void 0:h.proxy)==null?void 0:r.$refs[`GroupRef${U(e.tableKey)}`]).$el.firstElementChild;de.create(o,{animation:300,handle:".drag-btn",onEnd:({newIndex:y,oldIndex:f,item:oe})=>{const j=oe,F=j.parentNode,z=d.value[f],N=d.value[y];if(z!=null&&z.fixed||N!=null&&N.fixed){const $=F.children[f];y>f?F.insertBefore(j,$):F.insertBefore(j,$&&$.nextElementSibling);return}const ie=d.value.splice(f,1)[0];d.value.splice(y,0,ie)}})})},ne=l=>!!d.value.filter(o=>p(o.label)===p(l))[0].fixed,R=l=>({content:l,offset:[0,18],duration:[300,0],followCursor:!0,hideOnClick:"toggle"}),re={reference:()=>k(t(je,{class:["w-[16px]",w.value]},null),[[A("tippy"),R("列设置")]])};return()=>{var o;let l;return t(G,null,[t("div",be(S,{class:["w-full","px-2","pb-2","bg-bg_color",c.value?["h-full!","z-2002","fixed","inset-0"]:"mt-2"]}),[t("div",{class:"flex justify-between w-full h-[60px] p-4"},[n!=null&&n.title?n.title():t("p",{class:"font-bold truncate"},[e.title]),t("div",{class:"flex items-center justify-around"},[n!=null&&n.buttons?t("div",{class:"flex mr-4"},[n.buttons()]):null,(o=e.tableRef)!=null&&o.size?t(G,null,[k(t(Re,{class:["w-[16px]",w.value],style:{transform:C.value?"none":"rotate(-90deg)"},onClick:()=>Q()},null),[[A("tippy"),R(C.value?"折叠":"展开")]]),t(i("el-divider"),{direction:"vertical"},null)]):null,k(t(Te,{class:["w-[16px]",w.value,m.value?"animate-spin":""],onClick:()=>J()},null),[[A("tippy"),R("刷新")]]),t(i("el-divider"),{direction:"vertical"},null),k(t(i("el-dropdown"),{trigger:"click"},I({default:()=>[t(Ne,{class:["w-[16px]",w.value]},null)]},te)),[[A("tippy"),R("密度")]]),t(i("el-divider"),{direction:"vertical"},null),t(i("el-popover"),{placement:"bottom-start","popper-style":{padding:0},width:"200",trigger:"click"},I({default:()=>[t("div",{class:[Z.value]},[t(i("el-checkbox"),{class:"-mr-1!",label:"列展示",modelValue:g.value,"onUpdate:modelValue":r=>g.value=r,indeterminate:u.value,onChange:r=>X(r)},null),t(i("el-button"),{type:"primary",link:!0,onClick:()=>le()},{default:()=>[T("重置")]})]),t("div",{class:"pt-[6px] pl-[11px]"},[t(i("el-scrollbar"),{"max-height":"36vh"},{default:()=>[t(i("el-checkbox-group"),{ref:`GroupRef${U(e.tableKey)}`,modelValue:M.value,onChange:r=>Y(r)},{default:()=>[t(i("el-space"),{direction:"vertical",alignment:"flex-start",size:0},Ie(l=x.map((r,y)=>t("div",{class:"flex items-center"},[t(Be,{class:["drag-btn w-[16px] mr-2",ne(r)?"cursor-no-drop!":"cursor-grab!"],onMouseenter:f=>ae(f)},null),t(i("el-checkbox"),{key:y,label:r,value:r,onChange:f=>ee(f,r)},{default:()=>[t("span",{title:p(r),class:"inline-block w-[120px] truncate hover:text-text_color_primary"},[p(r)])]})])))?l:{default:()=>[l]})]})]})])]},re)),t(i("el-divider"),{direction:"vertical"},null),k(t(i("iconifyIconOffline"),{class:["w-[16px]",w.value],icon:c.value?ge:xe,onClick:()=>W()},null),[[A("tippy"),c.value?"退出全屏":"全屏"]])])]),n.default({size:s.value,dynamicColumns:d.value})])])}}}),Ge=ye(Pe);export{Ge as P};
