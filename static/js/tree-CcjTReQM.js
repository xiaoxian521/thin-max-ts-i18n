var pt=Object.defineProperty,gt=Object.defineProperties;var bt=Object.getOwnPropertyDescriptors;var Ee=Object.getOwnPropertySymbols;var yt=Object.prototype.hasOwnProperty,xt=Object.prototype.propertyIsEnumerable;var Ne=(e,l,a)=>l in e?pt(e,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[l]=a,ue=(e,l)=>{for(var a in l||(l={}))yt.call(l,a)&&Ne(e,a,l[a]);if(Ee)for(var a of Ee(l))xt.call(l,a)&&Ne(e,a,l[a]);return e},ke=(e,l)=>gt(e,bt(l));import{d as ae,aM as fe,q as W,aN as ot,g as D,o as k,b as Y,aO as at,T as st,h as q,aj as K,av as Ct,aw as Mt,u as o,aP as ut,aQ as E,z as we,a2 as Ce,N as Se,P as $,c as Z,V as ce,e as G,ay as Oe,X as Pe,am as de,M as Be,r as oe,S as Ve,Y as kt,aR as Ye,aS as te,v as Ke,y as Ze,R as pe,an as wt,j as St,w as Xe,Q as It,f as Ue,aT as Wt,aD as Rt,_ as _t}from"./index-oxjyNx68.js";import{useDict as Ht}from"./hook-CWZ2d433.js";import{R as Ot}from"./index-CIpDD5g0.js";import{u as _e}from"./hooks-Chmzd7E3.js";import{A as Pt,E as Bt,D as Tt}from"./add-circle-line-DN8ioR0S.js";import"./dict.vue_vue_type_script_setup_true_lang-Dqnz6PLL.js";import"./rule-HvYL1ktu.js";import"./index-DIiWAn1t.js";import"./system-9A0qsO7I.js";let ie=null;function Lt(){return ie!==null}function At(e){ie&&it(),ie=e}function Ge(e){e===ie&&(ie=null)}function it(){ie&&(ie.closeMenu(),ie=null)}const le={defaultDirection:"br",defaultMinWidth:100,defaultMaxWidth:600,defaultZindex:100,defaultZoom:1,defaultAdjustPadding:{x:0,y:10}};function be(e,l){let a=e.offsetTop;return e.offsetParent!=null&&e.offsetParent!=l&&(a-=e.offsetParent.scrollTop,a+=be(e.offsetParent,l)),a}function ye(e,l){let a=e.offsetLeft;return e.offsetParent!=null&&e.offsetParent!=l&&(a-=e.offsetParent.scrollLeft,a+=ye(e.offsetParent,l)),a}function jt(e,l,a,i){return{x:ye(e,i)+l,y:be(e,i)+a}}const He="mx-menu-default-container",Ft="mx-menu-container-";let zt=0;function rt(e){const{getContainer:l,zIndex:a}=e;if(l){const f=typeof l=="function"?l():l;if(f){let t=f.getAttribute("id");return t||(t=Ft+zt++,f.setAttribute("id",t)),{eleId:t,container:f,isNew:!1}}}let i=document.getElementById(He);return i||(i=document.createElement("div"),i.setAttribute("id",He),i.setAttribute("class","mx-menu-ghost-host fullscreen"),document.body.appendChild(i)),i.style.zIndex=(a==null?void 0:a.toString())||le.defaultZindex.toString(),{eleId:He,container:i,isNew:!0}}function Qe(e){return typeof e=="number"?`${e}px`:e}const ee=ae({props:{vnode:{type:null},data:{type:null,default:null}},setup(e){const{vnode:l,data:a}=fe(e);return()=>typeof l.value=="function"?l.value(a.value):l.value}});function Dt(e,l){const a=ue({},e);return delete a[l],a}var $t=Object.defineProperty,Et=(e,l,a)=>l in e?$t(e,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[l]=a,Je=(e,l,a)=>Et(e,typeof l!="symbol"?l+"":l,a);class qe{constructor(l,a){Je(this,"x",0),Je(this,"y",0),this.x=l||0,this.y=a||0}set(l,a){this.x=l,this.y=a}substract(l){this.x-=l.x,this.y-=l.y}}function et(e){const{onDown:l,onMove:a,onUp:i}=e,f=new qe,t=new qe;let I;function r(p){p.stopPropagation(),t.set(p.x,p.y),t.substract(f),a(f,t,p,I)}function C(p){i(p,I),f.set(0,0),document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",C)}return(p,w)=>l(p,w)?(I=w,f.set(p.x,p.y),document.addEventListener("mousemove",r),document.addEventListener("mouseup",C),p.stopPropagation(),!0):!1}function Nt(e,l){let a=0;return{start(){a>0&&clearInterval(a),a=setInterval(()=>{a=0,l()},e)},stop(){a>0&&(clearInterval(a),a=0)}}}const ge=[],tt=Nt(100,()=>{for(const e of ge)e()});function Vt(e,l,a,i){let f=0,t=0;function I(){e.value&&(l&&f!==e.value.offsetWidth&&l(e.value.offsetWidth),a&&t!==e.value.offsetHeight&&a(e.value.offsetHeight),f=e.value.offsetWidth,t=e.value.offsetHeight)}return{startResizeChecker(){tt.start(),ge.push(I)},stopResizeChecker(){const r=ge.indexOf(I);r>=0&&ge.splice(r,1),ge.length===0&&tt.stop()}}}const lt=140,Yt=70,Kt=ae({__name:"ScrollRect",props:{scroll:{type:String,default:"both"},scrollBarAlwaysShow:{type:Boolean,default:!1},scrollBarBackgroundClickable:{type:Boolean,default:!1},height:{type:Number,default:void 0},width:{type:Number,default:void 0},maxHeight:{type:Number,default:void 0},maxWidth:{type:Number,default:void 0},containerClass:{type:String,default:""},containerStyle:{type:null}},emits:["scroll","resized"],setup(e,{expose:l,emit:a}){const i=e,f=a,t=W(),I=W(),r=W(),C=W(),p=W(),w=W(),P=W(!1),z=Ke(()=>i.scroll==="horizontal"||i.scroll==="both"),R=Ke(()=>i.scroll==="vertical"||i.scroll==="both"),g=Ze({show:!1,size:0,sizeRaw:0,pos:0}),d=Ze({show:!1,size:0,sizeRaw:0,pos:0});let c=0,b=0,F=0,M=0,m=null;const T={attributes:!0,childList:!0};function v(){if(t.value){if(g.show){const s=t.value.offsetWidth/t.value.scrollWidth;g.sizeRaw=s*t.value.offsetWidth,g.size=s*100,g.pos=t.value.scrollLeft/(t.value.scrollWidth-t.value.offsetWidth)*(100-g.size),s>=1&&(g.show=!1)}if(d.show){const s=t.value.offsetHeight/t.value.scrollHeight;d.sizeRaw=s*t.value.offsetHeight,d.size=s*100,d.pos=t.value.scrollTop/(t.value.scrollHeight-t.value.offsetHeight)*(100-d.size),s>=1&&(d.show=!1)}f("scroll",t.value.scrollLeft,t.value.scrollTop)}}function h(s=!1){if(!t.value)return;let n=z.value,B=R.value;const J=n&&(c!==t.value.scrollWidth||F!==t.value.offsetWidth),Q=R&&(b!==t.value.scrollHeight||M!==t.value.offsetHeight);if(!s&&!J&&!Q)return;const ne=window.getComputedStyle(t.value);(ne.overflow==="hidden"||ne.overflowX==="hidden")&&(n=!1),(ne.overflow==="hidden"||ne.overflowY==="hidden")&&(B=!1),g.show=n,d.show=B,v(),F=t.value.offsetWidth,M=t.value.offsetHeight,c=t.value.scrollWidth,b=t.value.scrollHeight,f("resized",c,b)}function _(s){var n;i.scroll=="horizontal"&&(s.deltaMode==0&&((n=t.value)==null||n.scrollTo({left:t.value.scrollLeft+(s.deltaY>0?lt:-140),behavior:"smooth"})),s.preventDefault(),s.stopPropagation())}function H(s){var n;s.deltaMode==0&&((n=t.value)==null||n.scrollTo({left:t.value.scrollLeft+(s.deltaY>0?lt:-140),behavior:"smooth"}),s.preventDefault(),s.stopPropagation())}function L(s){var n;s.deltaMode==0&&((n=t.value)==null||n.scrollTo({top:t.value.scrollTop+(s.deltaY>0?Yt:-70),behavior:"smooth"}),s.preventDefault(),s.stopPropagation())}let N=0,A=0,x=0,j=0;const X=et({onDown(s){return!r.value||!p.value?!1:(N=s.offsetX,A=s.x-s.offsetX-p.value.offsetLeft,s.preventDefault(),P.value=!0,!0)},onMove(s,n,B){t.value&&r.value&&(S(B.x-N-A),B.preventDefault(),B.stopPropagation())},onUp(){P.value=!1}}),V=et({onDown(s){return!C.value||!w.value?!1:(x=s.offsetY,j=s.y-s.offsetY-w.value.offsetTop,s.preventDefault(),P.value=!0,!0)},onMove(s,n,B){t.value&&C.value&&(se(B.y-x-j),B.preventDefault(),B.stopPropagation())},onUp(){P.value=!1}});function U(s){t.value&&(t.value.scrollLeft=s/100*(t.value.scrollWidth-t.value.offsetWidth))}function re(s){t.value&&(t.value.scrollLeft=s/100*(t.value.scrollHeight-t.value.offsetHeight))}function S(s){t.value&&(t.value.scrollLeft=s/(t.value.offsetWidth-g.sizeRaw)*(t.value.scrollWidth-t.value.offsetWidth))}function se(s){t.value&&(t.value.scrollTop=s/(t.value.offsetHeight-d.sizeRaw)*(t.value.scrollHeight-t.value.offsetHeight))}function Me(s){i.scrollBarBackgroundClickable&&S(s.offsetX-g.sizeRaw/2)}function u(s){i.scrollBarBackgroundClickable&&se(s.offsetY-d.sizeRaw/2)}const{startResizeChecker:y,stopResizeChecker:O}=Vt(t,()=>h(),()=>h());return we(()=>{Ce(()=>{setTimeout(()=>h(!0),200),h(!0),y(),m=new MutationObserver(()=>h()),m.observe(t.value,T)})}),Se(()=>{O(),m&&(m.disconnect(),m=null)}),l({refreshScrollState(){h(!0)},getScrollContainer(){return t.value},scrollTo(s,n){var B;(B=t.value)==null||B.scrollTo(s,n)},scrollToTop(){var s;(s=t.value)==null||s.scrollTo(0,0)},scrollToBottom(){var s;(s=t.value)==null||s.scrollTo(t.value.scrollWidth,t.value.scrollHeight)}}),(s,n)=>(k(),Z("div",{ref_key:"scrollrect",ref:I,class:ce(["vue-scroll-rect",e.scrollBarAlwaysShow?"always-show-scrollbar":"",e.scrollBarBackgroundClickable?"background-clickable":"",P.value?"dragging":""]),style:pe({width:e.width?`${e.width}px`:void 0,height:e.height?`${e.height}px`:void 0}),onWheel:_},[G("div",{ref_key:"container",ref:t,class:ce(["scroll-content",e.scroll,e.containerClass]),style:pe(ue({maxWidth:e.maxWidth?`${e.maxWidth}px`:void 0,maxHeight:e.maxHeight?`${e.maxHeight}px`:void 0},e.containerStyle)),onScroll:v},[K(s.$slots,"default")],38),g.show?K(s.$slots,"scrollBarX",{key:0,scrollBarValue:g,onScroll:U},()=>[G("div",{ref_key:"scrollBarRefX",ref:r,class:"scrollbar horizontal",onClick:Me,onWheel:H},[G("div",{class:"thumb",ref_key:"scrollBarThumbRefX",ref:p,style:pe({left:`${g.pos}%`,width:`${g.size}%`}),onMousedown:n[0]||(n[0]=(...B)=>o(X)&&o(X)(...B)),onWheel:H},null,36)],544)]):$("",!0),d.show?K(s.$slots,"scrollBarY",{key:1,scrollBarValue:d,onScroll:re},()=>[d.show?(k(),Z("div",{key:0,ref_key:"scrollBarRefY",ref:C,class:"scrollbar vertical",onClick:u,onWheel:L},[G("div",{class:"thumb",ref_key:"scrollBarThumbRefY",ref:w,style:pe({top:`${d.pos}%`,height:`${d.size}%`}),onMousedown:n[1]||(n[1]=(...B)=>o(V)&&o(V)(...B)),onWheel:L},null,36)],544)):$("",!0)]):$("",!0)],38))}}),Te=(e,l)=>{const a=e.__vccOpts||e;for(const[i,f]of l)a[i]=f;return a},Zt={},Xt={class:"mx-checked-mark","aria-hidden":"true",viewBox:"0 0 1024 1024"},Ut=G("path",{d:"M129.3,428.6L52,512l345,372.5l575-620.8l-69.5-75L400.4,718.2L129.3,428.6z"},null,-1),Gt=[Ut];function Qt(e,l){return k(),Z("svg",Xt,Gt)}const Jt=Te(Zt,[["render",Qt]]),qt={},el={class:"mx-right-arrow","aria-hidden":"true",viewBox:"0 0 1024 1024"},tl=G("path",{d:"M307.018 49.445c11.517 0 23.032 4.394 31.819 13.18L756.404 480.18c8.439 8.438 13.181 19.885 13.181 31.82s-4.741 23.38-13.181 31.82L338.838 961.376c-17.574 17.573-46.065 17.573-63.64-0.001-17.573-17.573-17.573-46.065 0.001-63.64L660.944 512 275.198 126.265c-17.574-17.573-17.574-46.066-0.001-63.64C283.985 53.839 295.501 49.445 307.018 49.445z"},null,-1),ll=[tl];function nl(e,l){return k(),Z("svg",el,ll)}const ol=Te(qt,[["render",nl]]),al={class:"mx-item-row"},sl=["xlink:href"],ul={key:1,class:"label"},il={class:"mx-item-row"},rl={class:"mx-shortcut"},Le=ae({__name:"ContextMenuItem",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},customRender:{type:Function,default:null},customClass:{type:String,default:""},clickHandler:{type:Function,default:null},label:{type:[String,Object,Function],default:""},icon:{type:[String,Object,Function],default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},hasChildren:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},clickableWhenHasChildren:{type:Boolean,default:!1},rawMenuItem:{type:Object,default:void 0}},emits:["click","subMenuOpen","subMenuClose"],setup(e,{expose:l,emit:a}){const i=e,f=a,{clickHandler:t,clickClose:I,clickableWhenHasChildren:r,disabled:C,hidden:p,label:w,icon:P,iconFontClass:z,showRightArrow:R,shortcut:g,hasChildren:d}=fe(i),c=W(!1),b=W(!1),F=W(),M=E("globalOptions"),m=E("globalHasSlot"),T=E("globalRenderSlot"),v=E("globalCloseMenu"),h=E("menuContext"),_={getSubMenuInstance:()=>{},showSubMenu:()=>c.value?(h.markActiveMenuItem(_,!0),!0):d.value?(L(),!0):!1,hideSubMenu:()=>{h.closeOtherSubMenu()},isDisabledOrHidden:()=>C.value||p.value,getElement:()=>F.value,focus:()=>b.value=!0,blur:()=>b.value=!1,click:H};te("menuItemInstance",_),we(()=>{h.isMenuItemDataCollectedFlag()?Ce(()=>{let x=0;const j=h.getElement();if(j){let X=0;for(let V=0;V<j.children.length;V++){const U=j.children[V];if(U.getAttribute("data-type")==="ContextMenuItem"){if(U===F.value){x=X;break}X++}}}h.addChildMenuItem(_,x)}):h.addChildMenuItem(_)}),Se(()=>{h.removeChildMenuItem(_)});function H(x){if(!C.value){if(x){const j=x.target;if(j.classList.contains("mx-context-no-clickable")||M.value.ignoreClickClassName&&j.classList.contains(M.value.ignoreClickClassName))return;if(M.value.clickCloseClassName&&j.classList.contains(M.value.clickCloseClassName)){x.stopPropagation(),v(i.rawMenuItem);return}}d.value?r.value?(typeof t.value=="function"&&t.value(x),f("click",x)):c.value||L():(typeof t.value=="function"&&t.value(x),f("click",x),I.value&&v(i.rawMenuItem))}}function L(x){b.value=!1,h.checkCloseOtherSubMenuTimeOut()||h.closeOtherSubMenu(),C.value||(h.markActiveMenuItem(_),d.value&&(x||h.markThisOpenedByKeyBoard(),h.addOpenedSubMenu(N),c.value=!0,Ce(()=>f("subMenuOpen",_))))}function N(){b.value=!1,c.value=!1,f("subMenuClose",_)}function A(){return{disabled:C.value,label:w.value,icon:P.value,iconFontClass:z.value,showRightArrow:R.value,clickClose:I.value,clickableWhenHasChildren:r.value,shortcut:g.value,theme:M.value.theme,isOpen:c,hasChildren:d,onClick:H,onMouseEnter:L,closeMenu:v}}return l(_),(x,j)=>o(p)?$("",!0):(k(),Z("div",{key:0,class:"mx-context-menu-item-wrapper",ref_key:"menuItemRef",ref:F,"data-type":"ContextMenuItem"},[o(m)("itemRender")?(k(),D(o(ee),{key:0,vnode:()=>o(T)("itemRender",A())},null,8,["vnode"])):e.customRender?(k(),D(o(ee),{key:1,vnode:e.customRender,data:A()},null,8,["vnode","data"])):(k(),Z("div",{key:2,class:ce(["mx-context-menu-item",o(C)?"disabled":"",b.value?"keyboard-focus":"",e.customClass?" "+e.customClass:"",c.value?"open":""]),onClick:H,onMouseenter:L},[K(x.$slots,"default",{},()=>[G("div",al,[G("div",{class:ce(["mx-icon-placeholder",e.preserveIconWidth?"preserve-width":""])},[K(x.$slots,"icon",{},()=>[o(m)("itemIconRender")?(k(),D(o(ee),{key:0,vnode:()=>o(T)("itemIconRender",A())},null,8,["vnode"])):typeof e.svgIcon=="string"&&e.svgIcon?(k(),Z("svg",Oe({key:1,class:"icon svg"},e.svgProps),[G("use",{"xlink:href":e.svgIcon},null,8,sl)],16)):typeof o(P)!="string"?(k(),D(o(ee),{key:2,vnode:o(P),data:o(P)},null,8,["vnode","data"])):typeof o(P)=="string"&&o(P)!==""?(k(),Z("i",{key:3,class:ce(o(P)+" icon "+o(z)+" "+o(M).iconFontClass)},null,2)):$("",!0)]),e.checked?K(x.$slots,"check",{key:0},()=>[o(m)("itemCheckRender")?(k(),D(o(ee),{key:0,vnode:()=>o(T)("itemCheckRender",A())},null,8,["vnode"])):$("",!0),Y(Jt)]):$("",!0)],2),K(x.$slots,"label",{},()=>[o(m)("itemLabelRender")?(k(),D(o(ee),{key:0,vnode:()=>o(T)("itemLabelRender",A())},null,8,["vnode"])):typeof o(w)=="string"?(k(),Z("span",ul,Pe(o(w)),1)):(k(),D(o(ee),{key:2,vnode:o(w),data:o(w)},null,8,["vnode","data"]))])]),G("div",il,[o(g)||x.$slots.shortcut?K(x.$slots,"shortcut",{key:0},()=>[o(m)("itemShortcutRender")?(k(),D(o(ee),{key:0,vnode:()=>o(T)("itemShortcutRender",A())},null,8,["vnode"])):$("",!0),G("span",rl,Pe(o(g)),1)]):$("",!0),o(R)?K(x.$slots,"rightArrow",{key:1},()=>[o(m)("itemRightArrowRender")?(k(),D(o(ee),{key:0,vnode:()=>o(T)("itemRightArrowRender",A())},null,8,["vnode"])):$("",!0),Y(ol)]):$("",!0)])])],34)),K(x.$slots,"submenu",{context:_,show:c.value})],512))}}),cl=ae({name:"ContextMenuSperator",components:{VNodeRender:ee},setup(){const e=E("globalHasSlot"),l=E("globalRenderSlot");return{globalHasSlot:e,globalRenderSlot:l}}}),dl={key:1,class:"mx-context-menu-item-sperator mx-context-no-clickable"};function fl(e,l,a,i,f,t){const I=oe("VNodeRender");return e.globalHasSlot("separatorRender")?(k(),D(I,{key:0,vnode:()=>e.globalRenderSlot("separatorRender",{})},null,8,["vnode"])):(k(),Z("div",dl))}const xe=Te(cl,[["render",fl]]),Ae=ae({__name:"ContextSubMenu",props:{items:{type:Object,default:null},show:{type:Boolean,default:!1},maxHeight:{type:Number,default:0},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0},adjustPosition:{type:Boolean,default:!0},direction:{type:String,default:"br"},parentMenuItemContext:{type:Object,default:null}},emits:["closeAnimFinished"],setup(e,{expose:l,emit:a}){const i=e,f=a,t=W(!1),I=E("globalGetMenuHostId",""),r=E("menuContext"),C=E("globalOptions");E("globalHasSlot"),E("globalRenderSlot");const{zIndex:p,getParentWidth:w,getParentHeight:P,getZoom:z}=r,{adjustPosition:R}=fe(i),g=W(),d=W(),c=W(),b=[],F=E("globalSetCurrentSubMenu"),M=[];let m=null,T=0;function v(){m&&m.blur()}function h(u,y){if(u){for(let O=y!==void 0?y:0;O<M.length;O++)if(!M[O].isDisabledOrHidden()){_(O);break}}else for(let O=y!==void 0?y:M.length-1;O>=0;O--)if(!M[O].isDisabledOrHidden()){_(O);break}}function _(u){var y;if(m&&v(),u!==void 0&&(m=M[Math.max(0,Math.min(u,M.length-1))]),!m)return;m.focus();const O=m.getElement();O&&((y=g.value)==null||y.scrollTo(0,Math.min(Math.max(-V.value,-O.offsetTop-O.offsetHeight+U.value),0)))}function H(){F(L)}const L={isTopLevel:()=>r.getParentContext()===null,closeSelfAndActiveParent:()=>{const u=x.getParentContext();if(u){u.closeOtherSubMenu();const y=u.getSubMenuInstanceContext();if(y)return y.focusCurrentItem(),!0}return!1},closeCurrentSubMenu:()=>{var u;return(u=x.getParentContext())==null?void 0:u.closeOtherSubMenu()},moveCurrentItemFirst:()=>h(!0),moveCurrentItemLast:()=>h(!1),moveCurrentItemDown:()=>h(!0,m?M.indexOf(m)+1:0),moveCurrentItemUp:()=>h(!1,m?M.indexOf(m)-1:0),focusCurrentItem:()=>_(),openCurrentItemSubMenu:()=>m?m==null?void 0:m.showSubMenu():!1,triggerCurrentItemClick:u=>m==null?void 0:m.click(u)};let N=!1,A=!1;const x={zIndex:p+1,container:r.container,adjustPadding:C.value.adjustPadding||le.defaultAdjustPadding,getParentWidth:()=>{var u;return((u=c.value)==null?void 0:u.offsetWidth)||0},getParentHeight:()=>{var u;return((u=c.value)==null?void 0:u.offsetHeight)||0},getPositon:()=>[S.value.x,S.value.y],getZoom:()=>C.value.zoom||le.defaultZoom,addOpenedSubMenu(u){b.push(u)},closeOtherSubMenu(){b.forEach(u=>u()),b.splice(0,b.length),F(L)},checkCloseOtherSubMenuTimeOut(){return T?(clearTimeout(T),T=0,!0):!1},closeOtherSubMenuWithTimeOut(){T=setTimeout(()=>{T=0,this.closeOtherSubMenu()},200)},addChildMenuItem:(u,y)=>{y===void 0?M.push(u):M.splice(y,0,u)},removeChildMenuItem:u=>{M.splice(M.indexOf(u),1),u.getSubMenuInstance=()=>{}},markActiveMenuItem:(u,y=!1)=>{v(),m=u,y&&_()},markThisOpenedByKeyBoard:()=>{N=!0},isOpenedByKeyBoardFlag:()=>N?(N=!1,!0):!1,isMenuItemDataCollectedFlag:()=>A,getElement:()=>c.value||null,getParentContext:()=>r,getSubMenuInstanceContext:()=>L};te("menuContext",x);const j={getChildItem:u=>M[u],getMenuDimensions:()=>d.value?{width:d.value.offsetWidth,height:d.value.offsetHeight}:{width:0,height:0},getSubmenuRoot:()=>d.value,getMenu:()=>c.value,getScrollValue:()=>{var u,y;return((y=(u=g.value)==null?void 0:u.getScrollContainer())==null?void 0:y.scrollTop)||0},setScrollValue:u=>{var y;return(y=g.value)==null?void 0:y.scrollTo(0,u)},getScrollHeight:()=>V.value,adjustPosition:()=>{se()},getMaxHeight:()=>U.value,getPosition:()=>S.value,setPosition:(u,y)=>{S.value.x=u,S.value.y=y}},X=E("menuItemInstance",void 0);X&&(X.getSubMenuInstance=()=>j);const V=W(0),U=W(0),re=W(!1),S=W({x:0,y:0});function se(){Ce(()=>{var O,s;const u=c.value,y=d.value;if(u&&y&&g.value){const{container:n}=r,B=(O=w==null?void 0:w())!=null?O:0,J=(s=P==null?void 0:P())!=null?s:0,Q=getComputedStyle(y),ne=parseFloat(Q.paddingLeft),ve=parseFloat(Q.paddingTop),Ie=J>0?ve:0,dt=document.documentElement.scrollHeight/z(),ft=document.documentElement.scrollWidth/z(),vt=Math.min(ft,n.offsetWidth),je=Math.min(dt,n.offsetHeight);let We=ye(u,n),Re=be(u,n);i.direction.includes("l")?S.value.x-=u.offsetWidth+ne:i.direction.includes("r")?S.value.x+=B+ne:(S.value.x+=B/2,S.value.x-=(u.offsetWidth+ne)/2),i.direction.includes("t")?S.value.y-=(u.offsetHeight+ve*2)/z():i.direction.includes("b")?S.value.y-=ve/z():S.value.y-=(u.offsetHeight+ve)/2/z(),Ce(()=>{var Fe,ze;We=ye(u,n),Re=be(u,n);const De=((ze=(Fe=g.value)==null?void 0:Fe.getScrollContainer())==null?void 0:ze.scrollHeight)||0,ht=i.maxHeight;V.value=i.maxHeight?Math.min(De,i.maxHeight):De;const mt=We+u.offsetWidth-vt,$e=Re+V.value+Ie*2-je;if(re.value=$e>0,R.value&&mt>0){const he=B+u.offsetWidth-ne,me=We;he>me?S.value.x-=me:S.value.x-=he}if(re.value){if(R.value){const he=$e,me=Re;he>me?S.value.y-=me-Ie:S.value.y-=he-Ie}U.value=je-(S.value.y+ve)}else U.value=ht||0})}u==null||u.focus({preventScroll:!0}),r.isOpenedByKeyBoardFlag()&&h(!0),A=!0})}function Me(){var u;const y=(u=i.parentMenuItemContext)==null?void 0:u.getElement();if(y){const O=ye(y,r.container),s=be(y,r.container);S.value.x=O,S.value.y=s}else{const[O,s]=r.getPositon();S.value.x=O,S.value.y=s}se()}return Be(()=>i.show,u=>{u&&Me()}),we(()=>{t.value=!0,F(L),Me()}),Se(()=>{t.value=!1,X&&(X.getSubMenuInstance=()=>{})}),l(j),(u,y)=>{const O=oe("ContextSubMenu",!0);return t.value?(k(),D(ut,{key:0,to:`#${o(I)}`},[Y(kt,Oe({appear:""},o(C).menuTransitionProps||{duration:10},{onAfterLeave:y[0]||(y[0]=s=>f("closeAnimFinished"))}),{default:q(()=>{var s;return[e.show?(k(),Z("div",Oe({key:0,ref_key:"submenuRoot",ref:d},u.$attrs,{class:["mx-context-menu",o(C).customClass?o(C).customClass:"",(s=o(C).theme)!=null?s:""],style:{maxWidth:e.maxWidth?o(Qe)(e.maxWidth):`${o(le).defaultMaxWidth}px`,minWidth:e.minWidth?o(Qe)(e.minWidth):`${o(le).defaultMinWidth}px`,zIndex:o(p),left:`${S.value.x}px`,top:`${S.value.y}px`},"data-type":"ContextSubMenu",onClick:H}),[Y(o(Kt),{ref_key:"scrollRectRef",ref:g,scroll:"vertical",maxHeight:U.value,containerClass:"mx-context-menu-scroll"},{default:q(()=>[G("div",{class:ce(["mx-context-menu-items"]),ref_key:"menu",ref:c},[K(u.$slots,"default",{},()=>[(k(!0),Z(Ve,null,st(e.items,(n,B)=>(k(),Z(Ve,{key:B},[n.hidden!==!0&&n.divided==="up"?(k(),D(xe,{key:0})):$("",!0),n.hidden!==!0&&n.divided==="self"?(k(),D(xe,{key:1})):(k(),D(Le,{key:2,clickHandler:n.onClick?J=>n.onClick(J):void 0,disabled:typeof n.disabled=="object"?n.disabled.value:n.disabled,hidden:typeof n.hidden=="object"?n.hidden.value:n.hidden,icon:n.icon,iconFontClass:n.iconFontClass,svgIcon:n.svgIcon,svgProps:n.svgProps,label:n.label,customRender:n.customRender,customClass:n.customClass,checked:typeof n.checked=="object"?n.checked.value:n.checked,shortcut:n.shortcut,clickClose:n.clickClose,clickableWhenHasChildren:n.clickableWhenHasChildren,preserveIconWidth:n.preserveIconWidth!==void 0?n.preserveIconWidth:o(C).preserveIconWidth,showRightArrow:n.children&&n.children.length>0,hasChildren:n.children&&n.children.length>0,rawMenuItem:n,onSubMenuOpen:J=>{var Q;return(Q=n.onSubMenuOpen)==null?void 0:Q.call(n,J)},onSubMenuClose:J=>{var Q;return(Q=n.onSubMenuClose)==null?void 0:Q.call(n,J)}},at({_:2},[n.children&&n.children.length>0?{name:"submenu",fn:q(({context:J,show:Q})=>[Y(O,{show:Q,parentMenuItemContext:J,items:n.children,maxWidth:n.maxWidth,minWidth:n.minWidth,maxHeight:n.maxHeight,adjustPosition:n.adjustSubMenuPosition!==void 0?n.adjustSubMenuPosition:o(C).adjustPosition,direction:n.direction!==void 0?n.direction:o(C).direction},null,8,["show","parentMenuItemContext","items","maxWidth","minWidth","maxHeight","adjustPosition","direction"])]),key:"0"}:void 0]),1032,["clickHandler","disabled","hidden","icon","iconFontClass","svgIcon","svgProps","label","customRender","customClass","checked","shortcut","clickClose","clickableWhenHasChildren","preserveIconWidth","showRightArrow","hasChildren","rawMenuItem","onSubMenuOpen","onSubMenuClose"])),n.hidden!==!0&&(n.divided==="down"||n.divided===!0)?(k(),D(xe,{key:3})):$("",!0)],64))),128))])],512)]),_:3},8,["maxHeight"])],16)):$("",!0)]}),_:3},16)],8,["to"])):$("",!0)}}}),ct=ae({__name:"ContextSubMenuWrapper",props:{options:{type:Object,default:null},show:{type:null,default:null},container:{type:Object,default:null},isFullScreenContainer:{type:Boolean,default:!0}},emits:["close","closeAnimFinished"],setup(e,{expose:l,emit:a}){const i=e,f=a,t=ot(),I=W(),{options:r,show:C,container:p}=fe(i);we(()=>{C.value&&z()}),Se(()=>{c()}),Be(C,v=>{v?z():(Ge(w),c())});const w={closeMenu:R,isClosed:g,getMenuRef:()=>I.value,getMenuDimensions:()=>{var h;var v;return(h=(v=I.value)==null?void 0:v.getMenuDimensions())!=null?h:{width:0,height:0}}};let P=!1;function z(){d(),At(w)}function R(v){P=!0,f("close",v),r.value.menuTransitionProps||f("closeAnimFinished"),Ge(w)}function g(){return P}function d(){setTimeout(()=>{document.addEventListener("click",m,!0),document.addEventListener("contextmenu",m,!0),document.addEventListener("scroll",M,!0),!i.isFullScreenContainer&&p.value&&p.value.addEventListener("scroll",M,!0),r.value.keyboardControl!==!1&&document.addEventListener("keydown",F,!0)},50)}function c(){document.removeEventListener("contextmenu",m,!0),document.removeEventListener("click",m,!0),document.removeEventListener("scroll",M,!0),!i.isFullScreenContainer&&p.value&&p.value.removeEventListener("scroll",M,!0),r.value.keyboardControl!==!1&&document.removeEventListener("keydown",F,!0)}const b=W();te("globalSetCurrentSubMenu",v=>b.value=v),te("globalGetMenuHostId",p.value.id);function F(v){var h,_,H,L,N,A,x,j,X,V,U,re,S;let se=!0;switch(v.key){case"Escape":{((h=b.value)==null?void 0:h.isTopLevel())===!1?(_=b.value)==null||_.closeCurrentSubMenu():R();break}case"ArrowDown":(H=b.value)==null||H.moveCurrentItemDown();break;case"ArrowUp":(L=b.value)==null||L.moveCurrentItemUp();break;case"Home":(N=b.value)==null||N.moveCurrentItemFirst();break;case"End":(A=b.value)==null||A.moveCurrentItemLast();break;case"ArrowLeft":{(x=b.value)!=null&&x.closeSelfAndActiveParent()||(X=(j=r.value).onKeyFocusMoveLeft)==null||X.call(j);break}case"ArrowRight":(V=b.value)!=null&&V.openCurrentItemSubMenu()||(re=(U=r.value).onKeyFocusMoveRight)==null||re.call(U);break;case"Enter":(S=b.value)==null||S.triggerCurrentItemClick(v);break;default:se=!1;break}se&&b.value&&(v.stopPropagation(),v.preventDefault())}function M(v){r.value.closeWhenScroll!==!1&&T(v.target,null)}function m(v){T(v.target,v)}function T(v,h){for(var _,H;v;){if(v.classList&&v.classList.contains("mx-context-menu"))return;v=v.parentNode}h?r.value.clickCloseOnOutside!==!1?(c(),R()):(H=(_=r.value).onClickOnOutside)==null||H.call(_,h):(c(),R())}return te("globalOptions",r),te("globalCloseMenu",R),te("globalIsFullScreenContainer",i.isFullScreenContainer),te("globalHasSlot",v=>t[v]!==void 0),te("globalRenderSlot",(v,h)=>K(t,v,ue({},h),()=>[de("span","Render slot failed")],!1)),te("menuContext",{zIndex:r.value.zIndex||le.defaultZindex,container:p.value,adjustPadding:{x:0,y:0},getZoom:()=>r.value.zoom||le.defaultZoom,getParentWidth:()=>0,getParentHeight:()=>0,getPositon:()=>[r.value.x,r.value.y],closeOtherSubMenuWithTimeOut:()=>{},checkCloseOtherSubMenuTimeOut:()=>!1,addOpenedSubMenu:()=>{},closeOtherSubMenu:()=>{},getParentContext:()=>null,getSubMenuInstanceContext:()=>null,getElement:()=>null,addChildMenuItem:()=>{},removeChildMenuItem:()=>{},markActiveMenuItem:()=>{},markThisOpenedByKeyBoard:()=>{},isOpenedByKeyBoardFlag:()=>!1,isMenuItemDataCollectedFlag:()=>!1}),l(w),(v,h)=>(k(),D(Ae,{ref_key:"submenuInstance",ref:I,show:o(C),items:o(r).items,adjustPosition:o(r).adjustPosition,maxWidth:o(r).maxWidth||o(le).defaultMaxWidth,minWidth:o(r).minWidth||o(le).defaultMinWidth,maxHeight:o(r).maxHeight,direction:o(r).direction||o(le).defaultDirection,onCloseAnimFinished:h[0]||(h[0]=_=>f("closeAnimFinished"))},{default:q(()=>[K(v.$slots,"default")]),_:3},8,["show","items","adjustPosition","maxWidth","minWidth","maxHeight","direction"]))}}),vl=ae({__name:"ContextMenu",props:{options:{type:Object,default:null},show:{type:Boolean,default:!1}},emits:["update:show","close"],setup(e,{expose:l,emit:a}){const i=a,f=e,{options:t,show:I}=fe(f),{isNew:r,container:C,eleId:p}=rt(t.value),w=W(null),P=ot();function z(R){var g,d;i("update:show",!1),i("close"),(d=(g=t.value).onClose)==null||d.call(g,R)}return l({closeMenu:()=>i("update:show",!1),isClosed:()=>!I.value,getMenuRef:()=>{var R;return(R=w.value)==null?void 0:R.getMenuRef()},getMenuDimensions:()=>{var g;var R;return(g=(R=w.value)==null?void 0:R.getMenuDimensions())!=null?g:{width:0,height:0}}}),(R,g)=>(k(),D(ut,{to:`#${o(p)}`},[Y(ct,{ref_key:"menuRef",ref:w,options:o(t),show:o(I),container:o(C),isFullScreenContainer:!o(r),onClose:z},at({_:2},[st(o(P),(d,c)=>({name:c,fn:q(b=>[K(R.$slots,c,Ct(Mt(b)))])}))]),1032,["options","show","container","isFullScreenContainer"])],8,["to"]))}}),hl=ae({name:"ContextMenuGroup",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},clickHandler:{type:Function,default:null},label:{type:String,default:""},icon:{type:String,default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},adjustSubMenuPosition:{type:Boolean,default:void 0},maxHeight:{type:[String,Number],default:0},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0}},setup(e,l){const a=E("globalOptions"),{adjustSubMenuPosition:i,maxWidth:f,minWidth:t,maxHeight:I}=fe(e),r=typeof i.value<"u"?i.value:a.value.adjustPosition,C=W(),p=W();return l.expose({getSubMenuRef:()=>C.value,getMenuItemRef:()=>p.value}),()=>de(Le,ke(ue({},e),{ref:p,showRightArrow:!0,maxWidth:void 0,minWidth:void 0,maxHeight:void 0,adjustSubMenuPosition:void 0,hasChildren:typeof l.slots.default!==void 0}),l.slots.default?ue({submenu:w=>de(Ae,{ref:C,show:w.show,maxWidth:f.value,minWidth:t.value,maxHeight:I.value,adjustPosition:r,parentMenuItemContext:w.context},{default:l.slots.default})},Dt(l.slots,"default")):l.slots)}});function ml(e,l,a,i){const f=W(!0),t=de(ct,{options:e,show:f,container:l,isFullScreenContainer:!a,onCloseAnimFinished:()=>{Ye(null,l)},onClose:I=>{var r;(r=e.onClose)==null||r.call(e,I),f.value=!1}},i);return Ye(t,l),t.component}function nt(e,l){const a=rt(e);return ml(e,a.container,a.isNew,l).exposed}const pl={install(e){e.config.globalProperties.$contextmenu=nt,e.component("ContextMenu",vl),e.component("ContextMenuItem",Le),e.component("ContextMenuGroup",hl),e.component("ContextMenuSperator",xe),e.component("ContextMenuSeparator",xe),e.component("ContextSubMenu",Ae)},showContextMenu(e,l){return nt(e,l)},isAnyContextMenuOpen(){return Lt()},closeContextMenu:it,transformMenuPosition:jt},gl={class:"h-full bg-bg_color overflow-hidden relative",style:{minHeight:"calc(100vh - 141px)"}},bl={class:"flex items-center h-[34px]"},yl=ae({__name:"tree",emits:["tree-select"],setup(e,{emit:l}){const a=l,i=W(),f=W(""),t=W({}),I={children:"children",label:"name"},{isDark:r}=wt(),{treeLoading:C,treeData:p,openDictDialog:w,getDictTreeData:P}=Ht(),z=(d,c)=>d?`${c.name}（${c.code}）`.includes(d):!0;function R(d){var b,F;const c=d.$treeNodeId;t.value[c]=(b=t.value[c])!=null&&b.highlight?Object.assign({id:c},t.value[c],{highlight:!1}):Object.assign({id:c},t.value[c],{highlight:!0}),Object.values(t.value).forEach(M=>{M.id!==c&&(M.highlight=!1)}),a("tree-select",(F=t.value[c])!=null&&F.highlight?Object.assign(ke(ue({},d),{selected:!0})):Object.assign(ke(ue({},d),{selected:!1})))}function g(d,{name:c,data:b}){d.preventDefault(),pl.showContextMenu({x:d.x,y:d.y,theme:r.value?"dark":"default",items:[{label:"修改",icon:de(_e(Bt)),onClick:()=>{w("修改",b)}},{label:"删除",icon:de(_e(Tt)),onClick:()=>{Wt.confirm(`确定要删除 <strong style='color:var(--el-color-primary)'>${c}</strong> 字典吗?`,"系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0,draggable:!0}).then(()=>{P(),Rt("已成功删除",{type:"success"})})}}]})}return Be(f,d=>{i.value.filter(d)}),(d,c)=>{const b=oe("IconifyIconOffline"),F=oe("el-icon"),M=oe("el-input"),m=oe("el-divider"),T=oe("el-tree"),v=oe("el-scrollbar"),h=oe("el-button"),_=St("loading");return Xe((k(),Z("div",gl,[G("div",bl,[Y(M,{modelValue:f.value,"onUpdate:modelValue":c[0]||(c[0]=H=>f.value=H),class:"mx-2",size:"small",placeholder:"请输入字典名称",clearable:""},{suffix:q(()=>[Y(F,{class:"el-input__icon"},{default:q(()=>[Xe(Y(b,{icon:"ri/search-line"},null,512),[[It,f.value.length===0]])]),_:1})]),_:1},8,["modelValue"])]),Y(m),Y(v,{height:"calc(90vh - 150px)"},{default:q(()=>[Y(T,{ref_key:"treeRef",ref:i,data:o(p),"node-key":"id",size:"small",props:I,"default-expand-all":"","expand-on-click-node":!1,"filter-node-method":z,onNodeClick:R},{default:q(({node:H,data:L})=>{var N,A,x;return[Y(o(Ot),{class:ce(["w-full!","p-1!","mt-2!","mr-2!","rounded","select-none","hover:text-primary",f.value.trim().length>0&&`${H.label}（${L.code}）`.includes(f.value)&&"text-red-500!",(N=t.value[H.id])!=null&&N.highlight?"dark:text-primary!":""]),style:pe({color:(A=t.value[H.id])!=null&&A.highlight?"var(--el-color-primary)":"",background:(x=t.value[H.id])!=null&&x.highlight?"var(--el-color-primary-light-7)":"transparent"}),onContextmenu:j=>g(j,{name:H.label,data:L})},{default:q(()=>[Ue(Pe(`${H.label}（${L.code}）`),1)]),_:2},1032,["class","style","onContextmenu"])]}),_:1},8,["data"])]),_:1}),Y(h,{class:"w-[90%] absolute bottom-[22px] left-[50%] -translate-x-[50%]",type:"primary",icon:o(_e)(o(Pt)),onClick:c[1]||(c[1]=H=>o(w)())},{default:q(()=>c[2]||(c[2]=[Ue(" 新增字典 ",-1)])),_:1,__:[2]},8,["icon"])])),[[_,o(C)]])}}}),Hl=_t(yl,[["__scopeId","data-v-68601043"]]);export{Hl as default};
